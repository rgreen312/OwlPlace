{"version":3,"sources":["components/ScrollToTop.tsx","colorPicker/components/colorPicker.tsx","canvas/components/Canvas.tsx","canvas/constants.ts","websocket/selectors.ts","canvas/selectors.ts","canvas/containers/CanvasContainer.tsx","canvas/actions.ts","canvas/actionTypes.ts","canvas/containers/CanvasPageContainer.tsx","websocket/actionTypes.ts","websocket/actions.ts","about/components/About.tsx","about/containers/AboutContainer.tsx","header/components/Header.tsx","login/actionTypes.ts","login/actions.ts","login/selectors.ts","header/containers/HeaderContainer.tsx","footer/components/Footer.tsx","error/components/Error.tsx","RoutingContainer.tsx","App.tsx","constants.ts","createReducer.ts","canvas/reducers.ts","login/reducers.ts","websocket/reducers.ts","index.tsx"],"names":["withRouter","children","pathname","location","useEffect","window","scrollTo","ColorPicker","onComplete","onCancel","useState","r","g","b","color","setColor","onChange","c","rgb","className","onClick","Canvas","props","canvasRef","createRef","state","showColorPicker","isDrag","translateX","translateY","dragStartX","dragStartY","bind","updateTranslate","this","current","width","height","context","getContext","registerContext","imageSmoothingEnabled","fillStyle","fillRect","addEventListener","ev","getMousePos","x","y","updatePosition","onMouseOut","e","startPositionX","clientX","startPositionY","clientY","setState","removeEventListener","canvas","evt","rect","getBoundingClientRect","left","top","hideColorPicker","position","onUpdatePixel","zoomFactor","receivedError","setZoomFactor","classNames","style","transform","ref","type","Component","getWebSocket","websocket","socket","undefined","getCurrentPosition","curPosition","getZoomFactor","mapDispatchToProps","ctx","dispatch","payload","getState","zoom","Math","ceil","newFactor","canvasContext","getCanvasContext","scale","newColor","connect","CanvasPageContainer","CanvasContainer","StartConnect","ConnectSuccess","ConnectError","CloseConnection","closeConnection","ActionTypes","About","sendUpdateMessage","href","id","send","JSON","stringify","userId","makeUpdateMessage","Header","onLogin","isLoggedIn","name","onLogout","onGoogleScriptLoad","console","log","loginButton","useLocation","menu","Item","substring","length","to","dropdownMenu","key","overlay","border","padding","fontSize","verticalAlign","title","subTitle","extra","LoginStart","LoginSuccess","LoginError","SignOut","loginStart","loginSuccess","email","getIsLoggedIn","login","getUserName","a","googleAPILoaded","Promise","resolve","gapi","load","auth2","init","client_id","getAuthInstance","signIn","googleUser","currentUser","get","profile","getBasicProfile","getName","getId","getEmail","signOut","Footer","Error","RoutingContainer","basename","exact","path","component","AboutPage","ErrorPage","App","checkLogin","openConnection","React","timeout","setTimeout","race","then","isSignedIn","WebSocket","onopen","message","connectSuccess","onclose","event","onerror","error","connectError","onmessage","data","createReducer","initialState","handlers","action","handler","WebSocketActionTypes","combineReducers","isConnected","rootReducer","canvasReducers","loginReducers","webSocketReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","render","document","getElementById"],"mappings":"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","file":"static/js/main.48bf9966.chunk.js","sourcesContent":["import { FC, useEffect } from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\n\n// @ts-ignore - TODO: figure out why typescript doesn't like this\nconst ScrollToTop: FC<RouteComponentProps> = ({\n  children,\n  location: { pathname }\n}) => {\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  return children || null;\n};\n\nexport default withRouter(ScrollToTop);\n","import React, { FC, useState } from \"react\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport { Button } from \"antd\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport './colorPicker.scss';\r\n\r\ninterface RGBColor {\r\n  r: number;\r\n  g: number;\r\n  b: number;\r\n}\r\n\r\ninterface Props {\r\n  onComplete: (color: RGBColor) => void;\r\n  onCancel: () => void;\r\n}\r\n// http://casesandberg.github.io/react-color/\r\n\r\nconst ColorPicker: FC<Props> = ({ onComplete, onCancel }) => {\r\n  const [color, setColor] = useState({ r: 0, g: 0, b: 0 })\r\n  const complete = () => onComplete(color);\r\n\r\n  return ( \r\n    <div>\r\n      <SketchPicker \r\n        color={color}\r\n        onChange={(c) => setColor({ r: c.rgb.r, b: c.rgb.b, g: c.rgb.g })}\r\n      />\r\n      <div className='button-bar'>\r\n        <Button onClick={complete} className='okay-button'>\r\n          Okay\r\n        </Button>\r\n        <Button onClick={onCancel} className='cancel-button'>\r\n          Cancel\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n\r\nexport default ColorPicker;\r\n","import React, { Component, createRef, RefObject, useState } from 'react';\nimport ColorPicker from '../../colorPicker/components/colorPicker';\nimport { Redirect } from 'react-router-dom';\nimport './Canvas.scss';\nimport { Icon } from 'antd';\nimport { ZOOM_CHANGE_FACTOR } from '../constants';\nimport { Color, RGBColor } from 'react-color';\nimport classNames from 'classnames';\n\ninterface Props {\n  receivedError: boolean;\n  registerContext: (context: CanvasRenderingContext2D) => void;\n  updatePosition: (x: number, y: number) => void;\n  position: { x: number; y: number };\n  onMouseOut: () => void;\n  onUpdatePixel: (newColor: Color, x: number, y: number) => void;\n  zoomFactor: number;\n  setZoomFactor: (newZoom: number) => void;\n}\n\ninterface State {\n  showColorPicker: boolean;\n  isDrag: boolean;\n  translateX: number;\n  translateY: number;\n  dragStartX: number;\n  dragStartY: number;\n}\n\nclass Canvas extends Component<Props, State> {\n  canvasRef: RefObject<HTMLCanvasElement>;\n\n  constructor(props) {\n    super(props);\n    this.canvasRef = createRef();\n    this.state = {\n      showColorPicker: false,\n      isDrag: false,\n      translateX: 0,\n      translateY: 0,\n      dragStartX: 0,\n      dragStartY: 0\n    };\n    this.onCancel = this.onCancel.bind(this);\n    this.onComplete = this.onComplete.bind(this);\n    this.updateTranslate = this.updateTranslate.bind(this);\n  }\n\n  componentDidMount() {\n    this.canvasRef.current!.width = 1000;\n    this.canvasRef.current!.height = 1000;\n\n    const context = this.canvasRef.current!.getContext('2d');\n\n    // const image = new Image();\n\n    // image.onload = function() {\n    //   if (context) {\n    //     context.drawImage(image, 0, 0);\n    //   }\n    // };\n    // image.src = this.props.initialImage;\n\n    if (context) {\n      this.props.registerContext(context);\n    }\n\n    context!.imageSmoothingEnabled = false;\n\n    // TODO: remove this code\n    context!.fillStyle = '#000000';\n    context!.fillRect(0, 0, 1000, 500);\n    context!.fillStyle = '#ff0000';\n    context!.fillRect(0, 500, 1000, 500);\n\n    this.canvasRef.current!.addEventListener('mousemove', ev => {\n      if (this.state.showColorPicker) return;\n      const { x, y } = this.getMousePos(this.canvasRef.current, ev);\n      this.props.updatePosition(x, y);\n    });\n\n    this.canvasRef.current!.addEventListener('mouseout', () => {\n      if (this.state.showColorPicker) return;\n      this.props.onMouseOut();\n    });\n\n    // On mousedown, get the current location to be used for dragging\n    this.canvasRef.current!.addEventListener('mousedown', e => {\n      const { translateX, translateY } = this.state;\n      const startPositionX = e.clientX - translateX;\n      const startPositionY = e.clientY - translateY;\n\n      this.setState({\n        dragStartX: startPositionX,\n        dragStartY: startPositionY\n      });\n\n      // If the user moves after clicking, then they are dragging so we add listener\n      this.canvasRef.current!.addEventListener(\n        'mousemove',\n        this.updateTranslate\n      );\n    });\n\n    /**\n     * On mouse up, we check if the user was dragging. If they were, we set isDrag to false and\n     * remove the event listener for dragging.\n     * \n     * If they were not dragging, then we display the color picker so we can update the color of\n     * the pixel.\n     */\n    this.canvasRef.current!.addEventListener('mouseup', ev => {\n      this.canvasRef.current!.removeEventListener(\n        'mousemove',\n        this.updateTranslate\n      );\n\n      if (!this.state.isDrag) {\n        const { x, y } = this.getMousePos(this.canvasRef.current, ev);\n        this.props.updatePosition(x, y);\n        this.showColorPicker();\n      }\n\n      this.setState({\n        isDrag: false\n      })\n    });\n  }\n\n  updateTranslate(ev: MouseEvent) {\n    const { dragStartX, dragStartY } = this.state;\n    const x = ev.clientX - dragStartX;\n    const y = ev.clientY - dragStartY;\n    this.setState({\n      isDrag: true,\n      translateX: x,\n      translateY: y\n    });\n  }\n\n  getMousePos(canvas, evt) {\n    var rect = canvas.getBoundingClientRect();\n    return {\n      x: evt.clientX - rect.left,\n      y: evt.clientY - rect.top\n    };\n  }\n\n  onCancel() {\n    this.hideColorPicker();\n  }\n\n  onComplete(c: RGBColor) {\n    this.hideColorPicker();\n\n    const context = this.canvasRef.current!.getContext('2d');\n\n    const x = this.props.position.x - 1;\n    const y = this.props.position.y - 1;\n\n    context!.fillStyle = `rgb(${c.r}, ${c.g}, ${c.b})`\n    context!.fillRect(x, y, 1, 1);\n\n    this.props.onUpdatePixel({ r: c.r, g: c.g, b: c.b }, x, y);\n  }\n\n  showColorPicker() {\n    this.setState({\n      showColorPicker: true\n    });\n  }\n\n  hideColorPicker() {\n    this.setState({\n      showColorPicker: false\n    });\n  }\n\n  render() {\n    const { receivedError, zoomFactor, setZoomFactor } = this.props;\n    const { translateX, translateY, isDrag } = this.state;\n    return (\n      // receivedError ? <Redirect to='/error'/> :\n      <div className='canvas-container'>\n        {this.state.showColorPicker && (\n          <div className='color-picker'>\n            <ColorPicker\n              onCancel={this.onCancel}\n              onComplete={c => this.onComplete(c)}\n            />\n          </div>\n        )}\n        <div\n          className={classNames({ 'pan-canvas': true, 'drag-canvas': isDrag })}\n          style={{ transform: `translate(${translateX}px, ${translateY}px)` }}\n        >\n          <div\n            className='zoom-canvas'\n            style={{ transform: `scale(${zoomFactor}, ${zoomFactor})` }}\n          >\n            <canvas ref={this.canvasRef} />\n          </div>\n        </div>\n        <div className='zoom-controls'>\n          <Icon\n            type='plus-circle'\n            onClick={() => setZoomFactor(zoomFactor + ZOOM_CHANGE_FACTOR)}\n            className='zoom-icon'\n          />\n          <Icon\n            type='minus-circle'\n            onClick={() => setZoomFactor(zoomFactor - ZOOM_CHANGE_FACTOR)}\n            className='zoom-icon'\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Canvas;\n","export const FETCH_IMAGE_ENDPOINT = '';\nexport const CANVAS_WIDTH = 1000;\nexport const CANVAS_HEIGHT = 1000;\nexport const DEFAULT_ZOOM = 41.0;\nexport const ZOOM_CHANGE_FACTOR = 10;\n","import { State } from '../types';\n\nexport const getWebSocket = (state: State): WebSocket | undefined => state.websocket.socket || undefined;\nexport const getIsConnected = (state: State): boolean => state.websocket.isConnected;\nexport const receivedError = (state: State): boolean => state.websocket.receivedError;\n","import { State } from '../types';\n\nexport const getCanvasContext = (state: State): CanvasRenderingContext2D | undefined => \n  state.canvas.canvasContext || undefined;\n\nexport const getCurrentPosition = (state: State): {x: number, y: number} | undefined => \n  state.canvas.curPosition || undefined;\n\nexport const getZoomFactor = (state: State): number => \n  state.canvas.zoomFactor;\n","import { connect } from 'react-redux';\nimport Canvas from '../components/Canvas';\nimport { receivedError } from '../../websocket/selectors';\nimport { registerCanvasContext, updateCursorPosition, clearCursorPosition, setZoomFactor, updatePixel } from '../actions';\nimport { getZoomFactor, getCurrentPosition } from '../selectors';\nimport { Color } from '../types';\n\ninterface DispatchProps {\n  registerContext: (context: CanvasRenderingContext2D) => void;\n  updatePosition: (x: number, y: number) => void;\n  onMouseOut: () => void;\n  setZoomFactor: (newZoom: number) => void;\n  onUpdatePixel: (newColor: Color, x: number, y: number) => void;\n}\n\ninterface StateProps {\n  receivedError: boolean;\n  zoomFactor: number;\n  position: {x: number, y: number} | undefined; \n}\n\nconst mapDispatchToProps: DispatchProps = {\n  registerContext: registerCanvasContext,\n  updatePosition: updateCursorPosition,\n  onMouseOut: clearCursorPosition,\n  setZoomFactor: setZoomFactor,\n  onUpdatePixel: updatePixel,\n};\n\nconst mapStateToProps  = (state): StateProps => ({\n  receivedError: receivedError(state),\n  zoomFactor: getZoomFactor(state),\n  position: getCurrentPosition(state), \n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Canvas);\n","// import { FETCH_IMAGE_ENDPOINT } from './constants';\n// import { HOSTNAME } from '../constants';\nimport { Color } from './types';\nimport * as ActionTypes from './actionTypes';\nimport { getZoomFactor, getCanvasContext } from './selectors'; \n\nconst fetchImageDataStart = () => ({\n  type: ActionTypes.FetchImageStart\n});\n\nexport type FetchImageDataStart = ReturnType<typeof fetchImageDataStart>;\n\nexport const fetchImageData = () => (dispatch) => {\n  dispatch(fetchImageDataStart());\n  \n}\n\nconst registerContext = (ctx: CanvasRenderingContext2D) => ({\n  type: ActionTypes.RegisterContext,\n  payload: {\n    context: ctx\n  }\n});\nexport type RegisterContext = ReturnType<typeof registerContext>;\n\nexport const registerCanvasContext = (ctx: CanvasRenderingContext2D) => dispatch => {\n  dispatch(registerContext(ctx));\n}\n\nconst updatePosition = (x: number, y: number) => ({\n  type: ActionTypes.UpdatePosition,\n  payload: {\n    x,\n    y\n  }\n})\nexport type UpdatePosition = ReturnType<typeof updatePosition>;\n\nexport const updateCursorPosition = (x: number, y: number) => (dispatch, getState) => {\n  const state = getState();\n  const zoom = getZoomFactor(state);\n  dispatch(updatePosition(Math.ceil(x / zoom), Math.ceil(y / zoom)));\n}\n\nconst clearPosition = () => ({\n  type: ActionTypes.ClearPosition\n})\nexport type ClearPosition = ReturnType<typeof clearPosition>;\n\nexport const clearCursorPosition = () => dispatch => {\n  dispatch(clearPosition());\n}\n\nconst setZoom = (f: number) => ({\n  type: ActionTypes.SetZoom,\n  payload: {\n    zoom: f\n  }\n});\nexport type SetZoom = ReturnType<typeof setZoom>;\n\nexport const setZoomFactor = (newFactor: number) => (dispatch, getState) => {\n  if (newFactor < 0) {\n    return;\n  }\n\n  const state = getState();\n  const ctx = getCanvasContext(state);\n  if (ctx) {\n    ctx.scale(newFactor, newFactor);\n  }\n  \n  dispatch(setZoom(newFactor));\n}\n\n\nexport const updatePixel = (newColor: Color, x: number, y: number) => (dispatch) => {\n\n}\n","export const FetchImageStart = 'canvas/FETCH_IMAGE_START';\nexport const FetchImageSuccess = 'canvas/FETCH_IMAGE_SUCCESS';\nexport const FetchImageError = 'canvas/FETCH_IMAGE_ERROR';\nexport const UpdatePixelStart = 'canvas/UPDATE_PIXEL_START';\nexport const UpdatePixelSuccess = 'canvas/UPDATE_PIXEL_SUCCESS';\nexport const UpdatePixelError = 'canvas/UPDATE_PIXEL_ERROR';\nexport const RegisterContext = 'canvas/REGISTER_CONTEXT';\nexport const UpdatePosition = 'canvas/UPDATE_POSITION';\nexport const ClearPosition = 'canvas/CLEAR_POSITION';\nexport const SetZoom = 'canvas/SET_ZOOM';\n","import React, { FC } from 'react';\nimport CanvasContainer from './CanvasContainer';\n\n\n\nconst CanvasPageContainer: FC = () => (\n  <CanvasContainer />\n);\n\nexport default CanvasPageContainer;\n","export const StartConnect = 'websocket/START_CONNECT';\nexport const ConnectSuccess = 'websocket/CONNECT_SUCCESS';\nexport const ConnectError = 'websocket/CONNECT_ERROR';\nexport const CloseConnection = 'websocket/CLOSE_CONNNECTION';\n","import { HOSTNAME } from '../constants';\nimport * as ActionTypes from './actionTypes';\nimport { getWebSocket } from './selectors';\n\nconst startConnect = () => ({\n  type: ActionTypes.StartConnect\n});\nexport type StartConnect =  ReturnType<typeof startConnect>;\n\nconst connectError = (error: string) => ({\n  type: ActionTypes.ConnectError,\n  payload: {\n    error\n  }\n});\nexport type ConnectError =  ReturnType<typeof connectError>;\n\nconst closeConnection = () => ({\n  type: ActionTypes.CloseConnection,\n});\nexport type CloseConnection =  ReturnType<typeof closeConnection>;\n\nconst connectSuccess = (socket: WebSocket) => ({\n  type: ActionTypes.ConnectSuccess,\n  payload: {\n    socket\n  }\n});\nexport type ConnectSuccess = ReturnType<typeof connectSuccess>;\n\nexport const openWebSocket = () => dispatch => {\n  dispatch(startConnect());\n\n  const socket = new WebSocket(`ws://${HOSTNAME}/ws`);\n    // open message is 0\n    socket.onopen = () => {\n      socket.send(\n        JSON.stringify({\n          type: 0,\n          message: \"Hi From the Client! The websocket just opened\"\n        })\n      );\n\n      socket.send(\n        JSON.stringify({\n          type: 1,\n          userId: \"AAAAAA\",\n          x: 6,\n          y: 9,\n          r: 4,\n          g: 2,\n          b: 0\n        })\n      );\n      \n    dispatch(connectSuccess(socket));\n  };\n\n  // close message is 9\n  socket.onclose = event => {\n    dispatch(closeConnection());\n  };\n\n  socket.onerror = error => {\n    dispatch(connectError(error.type));\n  };\n\n  socket.onmessage = event => {\n    const { data } = event;\n    // TODO (Ryan): figure out the best way to handle this... probably need to write some middlewear\n    console.log(\"Recieved a message from the server, message: \" + data);\n  };\n}\n\nconst makeUpdateMessage = (\n  id: string,\n  x: number,\n  y: number,\n  r: number,\n  g: number,\n  b: number\n) => {\n  return JSON.stringify({\n    type: 1,\n    userId: id,\n    x: x,\n    y: y,\n    r: r,\n    g: g,\n    b: b\n  });\n};\n\nexport const sendUpdateMessage = (id, x, y, r, g, b) => (dispatch, getState) => {\n  const socket = getWebSocket(getState());\n  if (socket) {\n    socket.send(makeUpdateMessage(id, x, y, r, g, b));\n  }\n}\n\nexport const closeWebSocket = () => (dispatch, getState) => {\n  const socket = getWebSocket(getState());\n  if (socket) {\n    socket.send(\n      JSON.stringify({\n        type: 9,\n        message: \"Client Closed!\"\n      })\n    );\n  }\n  dispatch(closeConnection());\n}\n\n// TODO (ryan): create action send different message types\n","import React, { FC } from \"react\";\nimport \"./About.scss\";\nimport { sendUpdateMessage } from \"../../websocket/actions\";\n\ninterface Props {\n  sendUpdateMessage: (id, x, y, r, g, b) => void;\n}\n\nconst About: FC<Props> = ({ sendUpdateMessage }) => (\n  <div className='about-page'>\n    <h1>OwlPlace</h1>\n    <p>\n      OwlPlace is a collaborative canvas editing application that allows users\n      to alter the contents of a shared canvas. Users will be able to change the\n      color of a single pixel within the canvas once per fixed time period\n      (likely once every couple minutes). When used by a large number of users,\n      groups of people may even collaborate and work together to create large\n      and intricate designs within the image for all to see. OwlPlace will\n      ensure that all users will see the same image at any given time, even\n      updating pixels live as other users change them.\n    </p>\n    <p>\n      Users will be able to access OwlPlace through a web application. When\n      visiting for the first time, users will be prompted to login with Google.\n      Once logged in, users will be able to view the canvas in its entirety,\n      zoom in on specific sections, see live updates to the canvas, and update\n      pixels. The goal of the front end of this application is to make the user\n      experience as simple as possible while still being engaging.\n    </p>\n    <p>\n      This application will be built on top of a distributed database. This\n      distributed database will be a custom solution implemented by our team\n      using the RAFT protocol to ensure consistency across servers. Each server\n      will run its own instance of the image control code and maintain its own\n      local database. RAFT will be used to maintain consistency of each server’s\n      local database and ensure that machines can recover the correct data if\n      they go offline and come back into the network. While the image and user\n      data systems will be somewhat separate from one another, they will use the\n      RAFT protocol API to ensure that local databases do not become out of sync\n      with one another.\n    </p>\n    <p>\n      For more information, visit the{\" \"}\n      <a href='https://docs.google.com/document/d/13_bi5Vf5WNiZuDCWOdyBopANCUBl-Cyt7jK-sCeUW2s/edit?usp=sharing'>\n        functional specification\n      </a>\n      .\n    </p>\n  </div>\n);\n\nexport default About;\n","import { connect } from 'react-redux';\nimport { sendUpdateMessage } from '../../websocket/actions';\nimport About from '../components/About';\n\ninterface DispatchProps {\n  sendUpdateMessage: (id, x, y, r, g, b) => void;\n}\n\nconst mapDispatchToProps: DispatchProps = {\n  sendUpdateMessage: sendUpdateMessage\n}\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(About);","import React, { FC } from \"react\";\nimport { PageHeader, Button, Menu, Dropdown, Icon, Tag } from \"antd\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport \"./Header.scss\";\n\ninterface Props {\n  isLoggedIn: boolean;\n  name?: string;\n  onLogin: () => void;\n  onLogout: () => void;\n}\n\nconst Header: FC<Props> = ({ onLogin, isLoggedIn, name, onLogout }) => {\n  //@ts-ignore\n  window.onGoogleScriptLoad = () => {\n    console.log(\"The google script has really loaded, cool!\");\n  };\n\n  const loginButton = isLoggedIn ? (\n    <div className='name-label'>Hi, {name}</div>\n  ) : (\n    <Button className='login-button' onClick={onLogin}>\n      Login\n    </Button>\n  );\n\n  let location = useLocation().pathname;\n\n  const menu = (\n    <Menu>\n      <Menu.Item>\n        {/*Check the last 5 characters in a string.*/}\n        {location.substring(location.length - 5, location.length) != \"about\" ? (\n          <Link to='/about'>About</Link>\n        ) : (\n          <Link to='/'>Home</Link>\n        )}\n      </Menu.Item>\n      {isLoggedIn && <Menu.Item onClick={onLogout}>Sign Out</Menu.Item>}\n    </Menu>\n  );\n\n  const dropdownMenu = (\n    <Dropdown key='more' overlay={menu}>\n      <Button\n        style={{\n          border: \"none\",\n          padding: 0\n        }}\n      >\n        <Icon\n          type='ellipsis'\n          style={{\n            fontSize: 20,\n            verticalAlign: \"top\"\n          }}\n        />\n      </Button>\n    </Dropdown>\n  );\n\n  return (\n    <PageHeader\n      title='OwlPlace'\n      subTitle='change the canvas one pixel at a time'\n      extra={[loginButton, dropdownMenu]}\n    />\n  );\n};\n\nexport default Header;\n","export const LoginStart = 'login/LOGIN_START';\nexport const LoginSuccess = 'login/LOGIN_SUCCESS';\nexport const LoginError = 'login/LOGIN_ERROR';\nexport const SignOut = 'login/SIGN_OUT';\n","import * as ActionTypes from './actionTypes';\n\nconst loginStart = () => ({\n  type: ActionTypes.LoginStart\n});\nexport type LoginStart = ReturnType<typeof loginStart>;\n\nconst loginSuccess = (name: string, id: string, email: string) => ({\n  type: ActionTypes.LoginSuccess,\n  payload: {\n    name,\n    id,\n    email,\n  }\n});\nexport type LoginSuccess = ReturnType<typeof loginSuccess>;\n\nconst loginError = () => ({\n  type: ActionTypes.LoginError\n});\nexport type LoginError = ReturnType<typeof loginError>;\n\nexport const login = () => async dispatch => {\n  dispatch(loginStart());\n\n  /**\n   * The Sign-In client object.\n   */\n  let auth2: any;\n\n  const googleAPILoaded: Promise<void> = new Promise(resolve => {\n    gapi.load('auth2', () => {\n      /**\n       * Retrieve the singleton for the GoogleAuth library and set up the\n       * client.\n       */\n      auth2 = gapi.auth2.init({\n          client_id: '634069824484-ch6gklc2fevg9852aohe6sv2ctq7icbk.apps.googleusercontent.com'\n      });\n      resolve();\n    });\n  });\n\n  await googleAPILoaded;\n\n  await gapi.auth2.getAuthInstance().signIn();\n  const googleUser = gapi.auth2.getAuthInstance().currentUser.get();\n  const profile = googleUser.getBasicProfile();\n\n  dispatch(loginSuccess(profile.getName(), profile.getId(), profile.getEmail()));\n}\n\nexport const checkLogin = () => async dispatch => {\n  dispatch(loginStart());\n\n  /**\n  * The Sign-In client object.\n  */\n let auth2: any;\n\n  return new Promise(resolve => {\n    const timeout = setTimeout(() => Promise.resolve(), 3000);\n    const loadApi = () => new Promise(resolve => {\n      while (!window.gapi) {} \n      resolve()\n    });\n\n    Promise.race([timeout, loadApi]);\n    if (!window.gapi) {\n      return;\n    }\n\n    gapi.load('auth2', () => {\n     /**\n      * Retrieve the singleton for the GoogleAuth library and set up the\n      * client.\n      */\n     gapi.auth2.init({\n         client_id: '634069824484-ch6gklc2fevg9852aohe6sv2ctq7icbk.apps.googleusercontent.com'\n     }).then( function() {\n         // Sign in the user if they are currently signed in.\n         auth2 = gapi.auth2.getAuthInstance(); \n         if (auth2.isSignedIn.get()) {\n           const googleUser = gapi.auth2.getAuthInstance().currentUser.get();\n           const profile = googleUser.getBasicProfile();\n           dispatch(loginSuccess(profile.getName(), profile.getName(), profile.getEmail())); \n         }\n       }\n     );\n\n      resolve();\n   });\n });\n}\n\nconst signOutAction = () => ({\n  type: ActionTypes.SignOut\n});\nexport type SignOut = ReturnType<typeof signOutAction>;\n\nexport const signOut = () => async dispatch => {\n  const auth2 = gapi.auth2.getAuthInstance();\n  await auth2.signOut();\n  dispatch(signOutAction());\n}\n","import { State } from '../types';\n\nexport const getIsLoggedIn = (state: State): boolean => state.login.isLoggedIn;\nexport const getUserName = (state: State): string | undefined => state.login.name || undefined;\nexport const getUserId = (state: State): string | undefined => state.login.userId || undefined;\nexport const getUserEmail = (state: State): string | undefined => state.login.email || undefined;\n","import { connect } from 'react-redux';\nimport Header from '../components/Header';\nimport { login, signOut } from '../../login/actions';\nimport { getIsLoggedIn, getUserName } from '../../login/selectors';\n\ninterface DispatchProps {\n  onLogin: () => void;\n  onLogout: () => void;\n}\n\ninterface StateProps {\n  isLoggedIn: boolean;\n  name?: string;\n}\n\nconst mapDispatchToProps: DispatchProps = {\n  onLogin: login,\n  onLogout: signOut,\n}\n\nconst mapStateToProps  = (state): StateProps => ({\n  isLoggedIn: getIsLoggedIn(state),\n  name: getUserName(state)\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Header);\n","import React from \"react\";\nimport \"./Footer.scss\";\n\nconst Footer: React.FC = () => {\n  return (\n    <div>\n      <footer>Made with &hearts; by COMP 413 @ Rice</footer>\n    </div>\n  );\n};\n\nexport default Footer;\n","import React, { FC } from 'react';\n\nconst Error: FC = () => (\n  <div className='error-page'>\n    There was an error.\n  </div>\n);\n\nexport default Error;\n","import React, { FC } from 'react';\nimport { HashRouter as Router, Route } from 'react-router-dom';\nimport ScrollToTop from './components/ScrollToTop';\nimport CanvasPageContainer from './canvas/containers/CanvasPageContainer';\nimport AboutPage from './about/containers/AboutContainer';\nimport Header from './header/containers/HeaderContainer';\nimport Footer from './footer/components/Footer';\nimport ErrorPage from './error/components/Error';\n\nconst RoutingContainer: FC = () => (\n  <Router basename='/OwlPlace'>\n    <ScrollToTop>\n      <Header />\n      <Route exact path='/' component={CanvasPageContainer} />\n      <Route path='/about' component={AboutPage} />\n      <Route path='/error' component={ErrorPage} />\n      <Footer />\n    </ScrollToTop>\n  </Router>\n);\n\nexport default RoutingContainer;\n","import React from \"react\";\nimport \"./App.scss\";\nimport RoutingContainer from './RoutingContainer';\nimport { connect } from 'react-redux';\nimport { checkLogin } from './login/actions';\nimport { openWebSocket } from './websocket/actions';\n\n// // updateMessage is type 1\n// const updateMessage = (\n//   id: string,\n//   x: number,\n//   y: number,\n//   r: number,\n//   g: number,\n//   b: number\n// ) => {\n//   return JSON.stringify({\n//     type: 1,\n//     userId: id,\n//     x: x,\n//     y: y,\n//     r: r,\n//     g: g,\n//     b: b\n//   });\n// };\n// const onClickP1 = (\n//   id: string,\n//   x: number,\n//   y: number,\n//   r: number,\n//   g: number,\n//   b: number\n// ) => {\n//   console.log(\"Sending update of Pixel 1\");\n//   socket.send(updateMessage(id, x, y, r, g, b));\n\n//   return true;\n// }\n\ninterface Props {\n  checkLogin: () => void;\n  openConnection: () => void;\n}\n\nclass App extends React.Component<Props> {\n\n  componentDidMount() {\n    this.props.checkLogin();\n    this.props.openConnection();\n  }\n  \n  render() {\n    return (\n      // <div>\n      //   <div className=\"top-nav-bar\">\n      //     <button className=\"login-btn\" onClick={onSignIn}>\n      //       <p className=\"login-text\">login</p>\n      //     </button>\n      //   </div>\n      //   <div className=\"main-wrapper\">\n      //     <h1>owlplaces</h1>\n      //     <h2>change the canvas one pixel at a time</h2>\n      //     <p>Click \"Pixel 1\" to send an update message to the server!\n      //       </p>\n      //       <button onClick = {() => onClickP1(\"user1\", 10, 400, 255, 255, 255)} id=\"p1\"> Pixel 1 </button>\n      //       {/* <button onClick= {onClickClose} id=\"close\">Close</button> */}\n      //   </div>\n      // </div>\n      <RoutingContainer />\n    );\n  }\n};\n\nconst mapDispatchToProps: Props = {\n  checkLogin: checkLogin,\n  openConnection: openWebSocket\n}\n\nexport default connect(\n  null,\n  mapDispatchToProps,\n)(App);\n","export const HOSTNAME = '127.0.0.1:3001';\n","// TODO (ryan): add stricter typing to handlers\nexport function createReducer<T>(\n  initialState: T,\n  handlers\n) {\n  return function(state: T = initialState, action): T {\n    const handler = handlers[action && action.type];\n    if (!handler) {\n      return state;\n    }\n    return handler(state, action);\n  };\n}\n","import { Color } from './types';\nimport * as ActionTypes from './actionTypes';\nimport { combineReducers,  } from 'redux';\nimport { createReducer } from '../createReducer';\nimport { RegisterContext, UpdatePosition, SetZoom } from './actions';\nimport * as WebSocketActionTypes from '../websocket/actionTypes';\nimport { DEFAULT_ZOOM } from './constants'\n\nexport interface State {\n  canvasContext: CanvasRenderingContext2D | null;\n  initialImage: string | null;\n  curPosition: { x: number, y: number} | null;\n  zoomFactor: number;\n}\n\nconst canvasContext = createReducer<State['canvasContext']>(null, {\n  [WebSocketActionTypes.ConnectError]: () => null,\n  [ActionTypes.RegisterContext]: (state, action: RegisterContext) => action.payload.context\n});\n\nconst curPosition = createReducer<State['curPosition']>(null, {\n  [ActionTypes.ClearPosition]: () => null,\n  [ActionTypes.UpdatePosition]: (state, action: UpdatePosition) => action.payload\n});\n\nconst zoomFactor = createReducer<State['zoomFactor']>(DEFAULT_ZOOM, {\n  [ActionTypes.SetZoom]: (state, action: SetZoom) => action.payload.zoom\n})\n\nexport default combineReducers({\n  canvasContext,\n  curPosition,\n  zoomFactor,\n});\n","import { createReducer } from '../createReducer';\nimport * as ActionTypes from './actionTypes';\nimport { combineReducers } from 'redux';\nimport { LoginSuccess } from './actions';\n\n\nexport interface State {\n  isLoggedIn: boolean;\n  name: string | null;\n  email: string | null;\n  userId: string | null;\n}\n\nconst isLoggedIn = createReducer<State['isLoggedIn']>(false, {\n  [ActionTypes.LoginStart]: () =>  false,\n  [ActionTypes.LoginError]: () =>  false,\n  [ActionTypes.SignOut]: () => false,\n  [ActionTypes.LoginSuccess]: () => true,\n});\n\nconst name = createReducer<State['name']>(null, {\n  [ActionTypes.LoginStart]: () =>  null,\n  [ActionTypes.LoginError]: () =>  null,\n  [ActionTypes.SignOut]: () => null,\n  [ActionTypes.LoginSuccess]: (state, action: LoginSuccess) => action.payload.name,\n});\n\nconst email = createReducer<State['name']>(null, {\n  [ActionTypes.LoginStart]: () =>  null,\n  [ActionTypes.LoginError]: () =>  null,\n  [ActionTypes.SignOut]: () => null,\n  [ActionTypes.LoginSuccess]: (state, action: LoginSuccess) => action.payload.email,\n});\n\nconst id = createReducer<State['userId']>(null, {\n  [ActionTypes.LoginStart]: () =>  null,\n  [ActionTypes.LoginError]: () =>  null,\n  [ActionTypes.SignOut]: () => null,\n  [ActionTypes.LoginSuccess]: (state, action: LoginSuccess) => action.payload.id,\n});\n\n\n\nexport default combineReducers({\n  isLoggedIn,\n  name,\n  email,\n  id,\n});\n","import { createReducer } from '../createReducer';\nimport * as ActionTypes from './actionTypes';\nimport { ConnectSuccess } from './actions';\nimport { combineReducers } from 'redux';\n \nexport interface State {\n  socket: WebSocket | null;\n  isConnected: boolean;\n  receivedError: boolean; \n}\n\nconst socket = createReducer<State['socket']>(null, {\n  [ActionTypes.StartConnect]: () => null,\n  [ActionTypes.ConnectError]: () => null,\n  [ActionTypes.CloseConnection]: () => null,\n  [ActionTypes.ConnectSuccess]: (state, action: ConnectSuccess) => action.payload.socket,\n});\n\nconst isConnected = createReducer<State['isConnected']>(false, {\n  [ActionTypes.StartConnect]: () => false,\n  [ActionTypes.ConnectError]: () => false,\n  [ActionTypes.CloseConnection]: () => false,\n  [ActionTypes.ConnectSuccess]: () => true,\n});\n\nconst receivedError = createReducer<State['receivedError']>(false, {\n  [ActionTypes.StartConnect]: () => false,\n  [ActionTypes.ConnectError]: () => true,\n  [ActionTypes.CloseConnection]: () => false,\n  [ActionTypes.ConnectSuccess]: () => false,\n}); \n\nexport default combineReducers({\n  socket,\n  isConnected,\n  receivedError\n})\n","import React from 'react';\nimport { render } from 'react-dom'\nimport './index.scss';\nimport App from './App';\nimport { combineReducers, createStore, applyMiddleware, compose } from 'redux';\nimport canvasReducers from './canvas/reducers';\nimport loginReducers from './login/reducers';\nimport webSocketReducers from './websocket/reducers';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\n\nconst rootReducer = combineReducers({\n  canvas: canvasReducers,\n  login: loginReducers,\n  websocket: webSocketReducers,\n});\n\n// @ts-ignore - redux devtools doesn't have type definitions\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}