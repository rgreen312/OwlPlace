(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{205:function(e,n,t){e.exports=t(439)},210:function(e,n,t){},211:function(e,n,t){},219:function(e,n,t){},275:function(e,n,t){},437:function(e,n,t){},438:function(e,n,t){},439:function(e,n,t){"use strict";t.r(n);var a,o,r=t(0),c=t.n(r),i=t(6),u=(t(210),t(91)),l=t(92),s=t(96),f=t(93),p=t(95),m=(t(211),t(67)),g=t(41),d=Object(g.e)(function(e){var n=e.children,t=e.location.pathname;return Object(r.useEffect)(function(){window.scrollTo(0,0)},[t]),n||null}),b=function(){return c.a.createElement("div",null,"This is the canvas page")},v=t(29),O="websocket/START_CONNECT",h="websocket/CONNECT_SUCCESS",E="websocket/CONNECT_ERROR",y="websocket/CLOSE_CONNNECTION",C=function(e){return e.websocket.socket||void 0},j=function(e){return e.websocket.receivedError},k=function(){return{type:y}},w=function(e){var n=e.sendUpdateMessage;return c.a.createElement("div",{className:"about-page"},"Update the canvas one pixel at a time...",c.a.createElement("h2",null,"change the canvas one pixel at a time"),c.a.createElement("p",null,'Click "Pixel 1" to send an update message to the server!'),c.a.createElement("button",{onClick:function(){return n("user1",10,400,255,255,255)},id:"p1"}," Pixel 1 "))},P={sendUpdateMessage:function(e,n,t,a,o,r){return function(c,i){var u=C(i());u&&u.send(function(e,n,t,a,o,r){return JSON.stringify({type:1,userId:e,x:n,y:t,r:a,g:o,b:r})}(e,n,t,a,o,r))}}},N=Object(v.b)(null,P)(w),S=t(98),R=t(138),I=t(442),T=t(13),x=t(440),_=t(441),L=(t(219),function(e){var n=e.onLogin,t=e.isLoggedIn,a=e.name,o=e.onLogout;window.onGoogleScriptLoad=function(){console.log("The google script has really loaded, cool!")};var r=t?c.a.createElement(c.a.Fragment,null,"Hi, ",a):c.a.createElement(S.a,{className:"login-button",onClick:n},"Login"),i=c.a.createElement(R.a,null,c.a.createElement(R.a.Item,null,c.a.createElement(m.b,{to:"/about"},"About")),t&&c.a.createElement(R.a.Item,{onClick:o},"Sign Out")),u=c.a.createElement(I.a,{key:"more",overlay:i},c.a.createElement(S.a,{style:{border:"none",padding:0}},c.a.createElement(T.a,{type:"ellipsis",style:{fontSize:20,verticalAlign:"top"}})));return c.a.createElement(x.a,{title:"OwlPlace",subTitle:"change the canvas one pixel at a time",tags:c.a.createElement(_.a,{color:"green"},"COMP 413"),extra:[r,u]})}),A=t(50),M=t.n(A),U=t(97),z="login/LOGIN_START",F="login/LOGIN_SUCCESS",G="login/LOGIN_ERROR",D="login/SIGN_OUT",J=function(){return{type:z}},X=function(e,n,t){return{type:F,payload:{name:e,id:n,email:t}}},B=function(e){return e.login.isLoggedIn},Z=function(e){return e.login.name||void 0},q={onLogin:function(){return function(){var e=Object(U.a)(M.a.mark(function e(n){var t,a,o;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(J()),t=new Promise(function(e){gapi.load("auth2",function(){gapi.auth2.init({client_id:"634069824484-ch6gklc2fevg9852aohe6sv2ctq7icbk.apps.googleusercontent.com"}),e()})}),e.next=4,t;case 4:return e.next=6,gapi.auth2.getAuthInstance().signIn();case 6:a=gapi.auth2.getAuthInstance().currentUser.get(),o=a.getBasicProfile(),n(X(o.getName(),o.getId(),o.getEmail()));case 9:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()},onLogout:function(){return function(){var e=Object(U.a)(M.a.mark(function e(n){var t;return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=gapi.auth2.getAuthInstance(),e.next=3,t.signOut();case 3:n({type:D});case 4:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()}},H=Object(v.b)(function(e){return{isLoggedIn:B(e),name:Z(e)}},q)(L),V=(t(275),function(){return c.a.createElement("div",null,c.a.createElement("footer",null,"Made with \u2665 by COMP 413 @ Rice"))}),W=function(){return c.a.createElement("div",{className:"error-page"},"There was an error.")},Y=t(68),K=t(203),Q=t(201),$=(t(437),function(e){var n=e.onComplete,t=e.onCancel,a=Object(r.useState)({r:0,g:0,b:0}),o=Object(K.a)(a,2),i=o[0],u=o[1];return c.a.createElement("div",null,c.a.createElement(Q.SketchPicker,{color:i,onChange:function(e){return u({r:e.rgb.r,b:e.rgb.b,g:e.rgb.g})}}),c.a.createElement("div",{className:"button-bar"},c.a.createElement(S.a,{onClick:function(){return n(i)},className:"okay-button"},"Okay"),c.a.createElement(S.a,{onClick:t,className:"cancel-button"},"Cancel")))}),ee=(t(438),function(e){function n(e){var t;return Object(u.a)(this,n),(t=Object(s.a)(this,Object(f.a)(n).call(this,e))).canvasRef=void 0,t.canvasRef=Object(r.createRef)(),t.state={showColorPicker:!1},t.onCancel=t.onCancel.bind(Object(Y.a)(t)),t.onComplete=t.onComplete.bind(Object(Y.a)(t)),t}return Object(p.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.canvasRef.current.width=1e3,this.canvasRef.current.height=1e3;var n=this.canvasRef.current.getContext("2d");n&&this.props.registerContext(n),n.imageSmoothingEnabled=!1,n.fillStyle="#000000",n.fillRect(0,0,1e3,500),n.fillStyle="#ff0000",n.fillRect(0,500,1e3,500),this.canvasRef.current.addEventListener("mousemove",function(n){if(!e.state.showColorPicker){var t=e.getMousePos(e.canvasRef.current,n),a=t.x,o=t.y;e.props.updatePosition(a,o)}}),this.canvasRef.current.addEventListener("mouseout",function(){e.state.showColorPicker||e.props.onMouseOut()}),this.canvasRef.current.addEventListener("click",function(n){var t=e.getMousePos(e.canvasRef.current,n),a=t.x,o=t.y;e.props.updatePosition(a,o),e.showColorPicker()},!1)}},{key:"getMousePos",value:function(e,n){var t=e.getBoundingClientRect();return{x:n.clientX-t.left,y:n.clientY-t.top}}},{key:"onCancel",value:function(){this.hideColorPicker()}},{key:"onComplete",value:function(e){this.hideColorPicker();var n=this.canvasRef.current.getContext("2d"),t=this.props.position.x,a=this.props.position.y;n.fillStyle="rgb("+e.r+","+e.g+","+e.b+")",n.fillRect(t,a,1,1),this.props.onUpdatePixel({r:e.r,g:e.g,b:e.b},t,a)}},{key:"showColorPicker",value:function(){this.setState({showColorPicker:!0})}},{key:"hideColorPicker",value:function(){this.setState({showColorPicker:!1})}},{key:"render",value:function(){var e=this,n=this.props,t=(n.receivedError,n.zoomFactor),a=n.setZoomFactor;return c.a.createElement("div",{className:"canvas-container"},this.state.showColorPicker&&c.a.createElement("div",{className:"color-picker"},c.a.createElement($,{onCancel:this.onCancel,onComplete:function(n){return e.onComplete(n)}})),c.a.createElement("div",{className:"zoom-canvas",style:{transform:"scale(".concat(t,", ").concat(t,")")}},c.a.createElement("canvas",{ref:this.canvasRef})),c.a.createElement("div",{className:"zoom-controls"},c.a.createElement(T.a,{type:"plus-circle",onClick:function(){return a(t+10)},className:"zoom-icon"}),c.a.createElement(T.a,{type:"minus-circle",onClick:function(){return a(t-10)},className:"zoom-icon"})))}}]),n}(r.Component)),ne=function(e){return e.canvas.curPosition||void 0},te=function(e){return e.canvas.zoomFactor},ae={registerContext:function(e){return function(n){n(function(e){return{type:"canvas/REGISTER_CONTEXT",payload:{context:e}}}(e))}},updatePosition:function(e,n){return function(t,a){var o=a(),r=te(o);t(function(e,n){return{type:"canvas/UPDATE_POSITION",payload:{x:e,y:n}}}(Math.ceil(e/r),Math.ceil(n/r)))}},onMouseOut:function(){return function(e){e({type:"canvas/CLEAR_POSITION"})}},setZoomFactor:function(e){return function(n,t){if(!(e<0)){var a=function(e){return e.canvas.canvasContext||void 0}(t());a&&a.scale(e,e),n({type:"canvas/SET_ZOOM",payload:{zoom:e}})}}},onUpdatePixel:function(e,n,t){return function(e){}}},oe=Object(v.b)(function(e){return{receivedError:j(e),zoomFactor:te(e),position:ne(e)}},ae)(ee),re=function(){return c.a.createElement(m.a,null,c.a.createElement(d,null,c.a.createElement(H,null),c.a.createElement(g.a,{exact:!0,path:"/",component:b}),c.a.createElement(g.a,{path:"/about",component:N}),c.a.createElement(g.a,{path:"/error",component:W}),c.a.createElement(g.a,{path:"/canvas",component:oe}),c.a.createElement(V,null)))},ce=function(e){function n(){return Object(u.a)(this,n),Object(s.a)(this,Object(f.a)(n).apply(this,arguments))}return Object(p.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.checkLogin(),this.props.openConnection()}},{key:"render",value:function(){return c.a.createElement(re,null)}}]),n}(c.a.Component),ie={checkLogin:function(){return function(){var e=Object(U.a)(M.a.mark(function e(n){return M.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(J()),e.abrupt("return",new Promise(function(e){var t=setTimeout(function(){return Promise.resolve()},3e3);Promise.race([t,function(){return new Promise(function(e){for(;!window.gapi;);e()})}]),window.gapi&&gapi.load("auth2",function(){gapi.auth2.init({client_id:"634069824484-ch6gklc2fevg9852aohe6sv2ctq7icbk.apps.googleusercontent.com"}).then(function(){if(gapi.auth2.getAuthInstance().isSignedIn.get()){var e=gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();n(X(e.getName(),e.getName(),e.getEmail()))}}),e()})}));case 2:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()},openConnection:function(){return function(e){e({type:O});var n=new WebSocket("ws://".concat("127.0.0.1:3001","/ws"));n.onopen=function(){n.send(JSON.stringify({type:0,message:"Hi From the Client! The websocket just opened"})),n.send(JSON.stringify({type:1,userId:"AAAAAA",x:6,y:9,r:4,g:2,b:0})),e(function(e){return{type:h,payload:{socket:e}}}(n))},n.onclose=function(n){e(k())},n.onerror=function(n){e(function(e){return{type:E,payload:{error:e}}}(n.type))},n.onmessage=function(e){var n=e.data;console.log("Recieved a message from the server, message: "+n)}}}},ue=Object(v.b)(null,ie)(ce),le=t(20),se=t(8);function fe(e,n){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,a=arguments.length>1?arguments[1]:void 0,o=n[a&&a.type];return o?o(t,a):t}}var pe,me,ge,de,be,ve,Oe,he=fe(null,(a={},Object(se.a)(a,E,function(){return null}),Object(se.a)(a,"canvas/REGISTER_CONTEXT",function(e,n){return n.payload.context}),a)),Ee=fe(null,(o={},Object(se.a)(o,"canvas/CLEAR_POSITION",function(){return null}),Object(se.a)(o,"canvas/UPDATE_POSITION",function(e,n){return n.payload}),o)),ye=fe(41,Object(se.a)({},"canvas/SET_ZOOM",function(e,n){return n.payload.zoom})),Ce=Object(le.c)({canvasContext:he,curPosition:Ee,zoomFactor:ye}),je=fe(!1,(pe={},Object(se.a)(pe,z,function(){return!1}),Object(se.a)(pe,G,function(){return!1}),Object(se.a)(pe,D,function(){return!1}),Object(se.a)(pe,F,function(){return!0}),pe)),ke=fe(null,(me={},Object(se.a)(me,z,function(){return null}),Object(se.a)(me,G,function(){return null}),Object(se.a)(me,D,function(){return null}),Object(se.a)(me,F,function(e,n){return n.payload.name}),me)),we=fe(null,(ge={},Object(se.a)(ge,z,function(){return null}),Object(se.a)(ge,G,function(){return null}),Object(se.a)(ge,D,function(){return null}),Object(se.a)(ge,F,function(e,n){return n.payload.email}),ge)),Pe=fe(null,(de={},Object(se.a)(de,z,function(){return null}),Object(se.a)(de,G,function(){return null}),Object(se.a)(de,D,function(){return null}),Object(se.a)(de,F,function(e,n){return n.payload.id}),de)),Ne=Object(le.c)({isLoggedIn:je,name:ke,email:we,id:Pe}),Se=fe(null,(be={},Object(se.a)(be,O,function(){return null}),Object(se.a)(be,E,function(){return null}),Object(se.a)(be,y,function(){return null}),Object(se.a)(be,h,function(e,n){return n.payload.socket}),be)),Re=fe(!1,(ve={},Object(se.a)(ve,O,function(){return!1}),Object(se.a)(ve,E,function(){return!1}),Object(se.a)(ve,y,function(){return!1}),Object(se.a)(ve,h,function(){return!0}),ve)),Ie=fe(!1,(Oe={},Object(se.a)(Oe,O,function(){return!1}),Object(se.a)(Oe,E,function(){return!0}),Object(se.a)(Oe,y,function(){return!1}),Object(se.a)(Oe,h,function(){return!1}),Oe)),Te=Object(le.c)({socket:Se,isConnected:Re,receivedError:Ie}),xe=t(202);t.d(n,"store",function(){return Ae});var _e=Object(le.c)({canvas:Ce,login:Ne,websocket:Te}),Le=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||le.d,Ae=Object(le.e)(_e,Le(Object(le.a)(xe.a)));Object(i.render)(c.a.createElement(v.a,{store:Ae},c.a.createElement(ue,null)),document.getElementById("root"))}},[[205,1,2]]]);
//# sourceMappingURL=main.6e7b6251.chunk.js.map