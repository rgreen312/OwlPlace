{"version":3,"sources":["components/ScrollToTop.tsx","canvas/containers/CanvasPageContainer.tsx","websocket/actionTypes.ts","websocket/selectors.ts","websocket/actions.ts","about/components/About.tsx","about/containers/AboutContainer.tsx","header/components/Header.tsx","login/actionTypes.ts","login/actions.ts","login/selectors.ts","header/containers/HeaderContainer.tsx","footer/components/Footer.tsx","error/components/Error.tsx","colorPicker/components/colorPicker.tsx","canvas/components/Canvas.tsx","canvas/constants.ts","canvas/selectors.ts","canvas/containers/CanvasContainer.tsx","canvas/actions.ts","canvas/actionTypes.ts","RoutingContainer.tsx","App.tsx","constants.ts","createReducer.ts","canvas/reducers.ts","login/reducers.ts","websocket/reducers.ts","index.tsx"],"names":["withRouter","children","pathname","location","useEffect","window","scrollTo","CanvasPageContainer","StartConnect","ConnectSuccess","ConnectError","CloseConnection","getWebSocket","state","websocket","socket","undefined","receivedError","closeConnection","type","ActionTypes","About","sendUpdateMessage","className","onClick","id","mapDispatchToProps","x","y","r","g","b","dispatch","getState","send","JSON","stringify","userId","makeUpdateMessage","connect","Header","onLogin","isLoggedIn","name","onLogout","onGoogleScriptLoad","console","log","loginButton","menu","Item","to","dropdownMenu","key","overlay","style","border","padding","fontSize","verticalAlign","title","subTitle","tags","color","extra","LoginStart","LoginSuccess","LoginError","SignOut","loginStart","loginSuccess","email","payload","getIsLoggedIn","login","getUserName","a","googleAPILoaded","Promise","resolve","gapi","load","auth2","init","client_id","getAuthInstance","signIn","googleUser","currentUser","get","profile","getBasicProfile","getName","getId","getEmail","signOut","Footer","Error","ColorPicker","onComplete","onCancel","useState","setColor","onChange","c","rgb","Canvas","props","canvasRef","createRef","showColorPicker","bind","this","current","width","height","context","getContext","registerContext","imageSmoothingEnabled","fillStyle","fillRect","addEventListener","ev","getMousePos","updatePosition","onMouseOut","canvas","evt","rect","getBoundingClientRect","clientX","left","clientY","top","hideColorPicker","position","onUpdatePixel","setState","zoomFactor","setZoomFactor","transform","ref","Component","getCurrentPosition","curPosition","getZoomFactor","ctx","zoom","Math","ceil","newFactor","canvasContext","getCanvasContext","scale","newColor","RoutingContainer","basename","exact","path","component","AboutPage","ErrorPage","CanvasContainer","App","checkLogin","openConnection","React","timeout","setTimeout","race","then","isSignedIn","WebSocket","onopen","message","connectSuccess","onclose","event","onerror","error","connectError","onmessage","data","createReducer","initialState","handlers","action","handler","WebSocketActionTypes","combineReducers","isConnected","rootReducer","canvasReducers","loginReducers","webSocketReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","render","document","getElementById"],"mappings":"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","file":"static/js/main.8224c994.chunk.js","sourcesContent":["import { FC, useEffect } from 'react';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\n\n// @ts-ignore - TODO: figure out why typescript doesn't like this\nconst ScrollToTop: FC<RouteComponentProps> = ({\n  children,\n  location: { pathname }\n}) => {\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, [pathname]);\n\n  return children || null;\n};\n\nexport default withRouter(ScrollToTop);\n","import React, { FC } from 'react';\nimport CanvasContainer from './CanvasContainer';\n\n\n\nconst CanvasPageContainer: FC = () => (\n  // <CanvasContainer />\n  <div>This is the canvas page</div>\n);\n\nexport default CanvasPageContainer;\n","export const StartConnect = 'websocket/START_CONNECT';\nexport const ConnectSuccess = 'websocket/CONNECT_SUCCESS';\nexport const ConnectError = 'websocket/CONNECT_ERROR';\nexport const CloseConnection = 'websocket/CLOSE_CONNNECTION';\n","import { State } from '../types';\n\nexport const getWebSocket = (state: State): WebSocket | undefined => state.websocket.socket || undefined;\nexport const getIsConnected = (state: State): boolean => state.websocket.isConnected;\nexport const receivedError = (state: State): boolean => state.websocket.receivedError;\n","import { HOSTNAME } from '../constants';\nimport * as ActionTypes from './actionTypes';\nimport { getWebSocket } from './selectors';\n\nconst startConnect = () => ({\n  type: ActionTypes.StartConnect\n});\nexport type StartConnect =  ReturnType<typeof startConnect>;\n\nconst connectError = (error: string) => ({\n  type: ActionTypes.ConnectError,\n  payload: {\n    error\n  }\n});\nexport type ConnectError =  ReturnType<typeof connectError>;\n\nconst closeConnection = () => ({\n  type: ActionTypes.CloseConnection,\n});\nexport type CloseConnection =  ReturnType<typeof closeConnection>;\n\nconst connectSuccess = (socket: WebSocket) => ({\n  type: ActionTypes.ConnectSuccess,\n  payload: {\n    socket\n  }\n});\nexport type ConnectSuccess = ReturnType<typeof connectSuccess>;\n\nexport const openWebSocket = () => dispatch => {\n  dispatch(startConnect());\n\n  const socket = new WebSocket(`ws://${HOSTNAME}/ws`);\n    // open message is 0\n    socket.onopen = () => {\n      socket.send(\n        JSON.stringify({\n          type: 0,\n          message: \"Hi From the Client! The websocket just opened\"\n        })\n      );\n\n      socket.send(\n        JSON.stringify({\n          type: 1,\n          userId: \"AAAAAA\",\n          x: 6,\n          y: 9,\n          r: 4,\n          g: 2,\n          b: 0\n        })\n      );\n      \n    dispatch(connectSuccess(socket));\n  };\n\n  // close message is 9\n  socket.onclose = event => {\n    dispatch(closeConnection());\n  };\n\n  socket.onerror = error => {\n    dispatch(connectError(error.type));\n  };\n\n  socket.onmessage = event => {\n    const { data } = event;\n    // TODO (Ryan): figure out the best way to handle this... probably need to write some middlewear\n    console.log(\"Recieved a message from the server, message: \" + data);\n  };\n}\n\nconst makeUpdateMessage = (\n  id: string,\n  x: number,\n  y: number,\n  r: number,\n  g: number,\n  b: number\n) => {\n  return JSON.stringify({\n    type: 1,\n    userId: id,\n    x: x,\n    y: y,\n    r: r,\n    g: g,\n    b: b\n  });\n};\n\nexport const sendUpdateMessage = (id, x, y, r, g, b) => (dispatch, getState) => {\n  const socket = getWebSocket(getState());\n  if (socket) {\n    socket.send(makeUpdateMessage(id, x, y, r, g, b));\n  }\n}\n\nexport const closeWebSocket = () => (dispatch, getState) => {\n  const socket = getWebSocket(getState());\n  if (socket) {\n    socket.send(\n      JSON.stringify({\n        type: 9,\n        message: \"Client Closed!\"\n      })\n    );\n  }\n  dispatch(closeConnection());\n}\n\n// TODO (ryan): create action send different message types\n","import React, { FC } from 'react';\nimport { sendUpdateMessage } from '../../websocket/actions'\n\n\ninterface Props {\n  sendUpdateMessage: (id, x, y, r, g, b) => void;\n}\n\nconst About: FC<Props> = ({ sendUpdateMessage }) => (\n  <div className='about-page'>\n    Update the canvas one pixel at a time...\n\n    <h2>change the canvas one pixel at a time</h2>\n      <p>Click \"Pixel 1\" to send an update message to the server!\n      </p>\n        <button onClick = {() => sendUpdateMessage(\"user1\", 10, 400, 255, 255, 255)} id=\"p1\"> Pixel 1 </button>\n        {/* <button onClick= {onClickClose} id=\"close\">Close</button> */}\n  </div>\n);\n\nexport default About;\n","import { connect } from 'react-redux';\nimport { sendUpdateMessage } from '../../websocket/actions';\nimport About from '../components/About';\n\ninterface DispatchProps {\n  sendUpdateMessage: (id, x, y, r, g, b) => void;\n}\n\nconst mapDispatchToProps: DispatchProps = {\n  sendUpdateMessage: sendUpdateMessage\n}\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(About);","import React, { FC } from \"react\";\nimport { PageHeader, Button, Menu, Dropdown, Icon, Tag } from \"antd\";\nimport { Link } from \"react-router-dom\";\nimport './Header.scss';\n\ninterface Props {\n  isLoggedIn: boolean;\n  name?: string;\n  onLogin: () => void;\n  onLogout: () => void;\n}\n\n// TODO(Ryan): Should add a isLoggedIn prop, if they are then display user's name\nconst Header: FC<Props> = ({ onLogin, isLoggedIn, name, onLogout }) => {\n  //@ts-ignore\n  window.onGoogleScriptLoad = () => {\n    console.log(\"The google script has really loaded, cool!\");\n  };\n\n  const loginButton = isLoggedIn ? (\n    <>Hi, {name}</>\n  ) : (\n    <Button className=\"login-button\" onClick={onLogin}>\n      Login\n    </Button>\n  );\n\n  // TODO(ryan): add sign out functionality\n  const menu = (\n    <Menu>\n      <Menu.Item>\n        <Link to=\"/about\">About</Link>\n      </Menu.Item>\n      {isLoggedIn && <Menu.Item onClick={onLogout}>Sign Out</Menu.Item>}\n    </Menu>\n  );\n\n  const dropdownMenu = (\n    <Dropdown key=\"more\" overlay={menu}>\n      <Button\n        style={{\n          border: \"none\",\n          padding: 0\n        }}\n      >\n        <Icon\n          type=\"ellipsis\"\n          style={{\n            fontSize: 20,\n            verticalAlign: \"top\"\n          }}\n        />\n      </Button>\n    </Dropdown>\n  );\n\n  return (\n    <PageHeader\n      title=\"OwlPlace\"\n      subTitle=\"change the canvas one pixel at a time\"\n      tags={<Tag color=\"green\">COMP 413</Tag>}\n      extra={[loginButton, dropdownMenu]}\n    />\n  );\n};\n\nexport default Header;\n","export const LoginStart = 'login/LOGIN_START';\nexport const LoginSuccess = 'login/LOGIN_SUCCESS';\nexport const LoginError = 'login/LOGIN_ERROR';\nexport const SignOut = 'login/SIGN_OUT';\n","import * as ActionTypes from './actionTypes';\n\nconst loginStart = () => ({\n  type: ActionTypes.LoginStart\n});\nexport type LoginStart = ReturnType<typeof loginStart>;\n\nconst loginSuccess = (name: string, id: string, email: string) => ({\n  type: ActionTypes.LoginSuccess,\n  payload: {\n    name,\n    id,\n    email,\n  }\n});\nexport type LoginSuccess = ReturnType<typeof loginSuccess>;\n\nconst loginError = () => ({\n  type: ActionTypes.LoginError\n});\nexport type LoginError = ReturnType<typeof loginError>;\n\nexport const login = () => async dispatch => {\n  dispatch(loginStart());\n\n  /**\n   * The Sign-In client object.\n   */\n  let auth2: any;\n\n  const googleAPILoaded: Promise<void> = new Promise(resolve => {\n    gapi.load('auth2', () => {\n      /**\n       * Retrieve the singleton for the GoogleAuth library and set up the\n       * client.\n       */\n      auth2 = gapi.auth2.init({\n          client_id: '634069824484-ch6gklc2fevg9852aohe6sv2ctq7icbk.apps.googleusercontent.com'\n      });\n      resolve();\n    });\n  });\n\n  await googleAPILoaded;\n\n  await gapi.auth2.getAuthInstance().signIn();\n  const googleUser = gapi.auth2.getAuthInstance().currentUser.get();\n  const profile = googleUser.getBasicProfile();\n\n  dispatch(loginSuccess(profile.getName(), profile.getId(), profile.getEmail()));\n}\n\nexport const checkLogin = () => async dispatch => {\n  dispatch(loginStart());\n\n  /**\n  * The Sign-In client object.\n  */\n let auth2: any;\n\n  return new Promise(resolve => {\n    const timeout = setTimeout(() => Promise.resolve(), 3000);\n    const loadApi = () => new Promise(resolve => {\n      while (!window.gapi) {} \n      resolve()\n    });\n\n    Promise.race([timeout, loadApi]);\n    if (!window.gapi) {\n      return;\n    }\n\n    gapi.load('auth2', () => {\n     /**\n      * Retrieve the singleton for the GoogleAuth library and set up the\n      * client.\n      */\n     gapi.auth2.init({\n         client_id: '634069824484-ch6gklc2fevg9852aohe6sv2ctq7icbk.apps.googleusercontent.com'\n     }).then( function() {\n         // Sign in the user if they are currently signed in.\n         auth2 = gapi.auth2.getAuthInstance(); \n         if (auth2.isSignedIn.get()) {\n           const googleUser = gapi.auth2.getAuthInstance().currentUser.get();\n           const profile = googleUser.getBasicProfile();\n           dispatch(loginSuccess(profile.getName(), profile.getName(), profile.getEmail())); \n         }\n       }\n     );\n\n      resolve();\n   });\n });\n}\n\nconst signOutAction = () => ({\n  type: ActionTypes.SignOut\n});\nexport type SignOut = ReturnType<typeof signOutAction>;\n\nexport const signOut = () => async dispatch => {\n  const auth2 = gapi.auth2.getAuthInstance();\n  await auth2.signOut();\n  dispatch(signOutAction());\n}\n","import { State } from '../types';\n\nexport const getIsLoggedIn = (state: State): boolean => state.login.isLoggedIn;\nexport const getUserName = (state: State): string | undefined => state.login.name || undefined;\nexport const getUserId = (state: State): string | undefined => state.login.userId || undefined;\nexport const getUserEmail = (state: State): string | undefined => state.login.email || undefined;\n","import { connect } from 'react-redux';\nimport Header from '../components/Header';\nimport { login, signOut } from '../../login/actions';\nimport { getIsLoggedIn, getUserName } from '../../login/selectors';\n\ninterface DispatchProps {\n  onLogin: () => void;\n  onLogout: () => void;\n}\n\ninterface StateProps {\n  isLoggedIn: boolean;\n  name?: string;\n}\n\nconst mapDispatchToProps: DispatchProps = {\n  onLogin: login,\n  onLogout: signOut,\n}\n\nconst mapStateToProps  = (state): StateProps => ({\n  isLoggedIn: getIsLoggedIn(state),\n  name: getUserName(state)\n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Header);\n","import React from \"react\";\nimport \"./Footer.scss\";\n\nconst Footer: React.FC = () => {\n  return (\n    <div>\n      <footer>Made with &hearts; by COMP 413 @ Rice</footer>\n    </div>\n  );\n};\n\nexport default Footer;\n","import React, { FC } from 'react';\n\nconst Error: FC = () => (\n  <div className='error-page'>\n    There was an error.\n  </div>\n);\n\nexport default Error;\n","import React, { FC, useState } from \"react\";\r\nimport { SketchPicker } from \"react-color\";\r\nimport { Button } from \"antd\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport './colorPicker.scss';\r\n\r\ninterface RGBColor {\r\n  r: number;\r\n  g: number;\r\n  b: number;\r\n}\r\n\r\ninterface Props {\r\n  onComplete: (color: RGBColor) => void;\r\n  onCancel: () => void;\r\n}\r\n// http://casesandberg.github.io/react-color/\r\n\r\nconst ColorPicker: FC<Props> = ({ onComplete, onCancel }) => {\r\n  const [color, setColor] = useState({ r: 0, g: 0, b: 0 })\r\n  const complete = () => onComplete(color);\r\n\r\n  return ( \r\n    <div>\r\n      <SketchPicker \r\n        color={color}\r\n        onChange={(c) => setColor({ r: c.rgb.r, b: c.rgb.b, g: c.rgb.g })}\r\n      />\r\n      <div className='button-bar'>\r\n        <Button onClick={complete} className='okay-button'>\r\n          Okay\r\n        </Button>\r\n        <Button onClick={onCancel} className='cancel-button'>\r\n          Cancel\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n\r\nexport default ColorPicker;\r\n","import React, { Component, createRef, RefObject, useState } from 'react';\nimport ColorPicker from '../../colorPicker/components/colorPicker';\nimport { Redirect } from 'react-router-dom';\nimport './Canvas.scss';\nimport { Icon } from 'antd';\nimport { ZOOM_CHANGE_FACTOR } from '../constants';\nimport { Color, RGBColor } from 'react-color';\n\ninterface Props {\n  receivedError: boolean;\n  registerContext: (context: CanvasRenderingContext2D) => void;\n  updatePosition: (x: number, y: number) => void;\n  position: {x: number, y: number}; \n  onMouseOut: () => void;\n  onUpdatePixel: (newColor: Color, x: number, y: number) => void;\n  zoomFactor: number;\n  setZoomFactor: (newZoom: number) => void;\n}\n\ninterface State {\n  showColorPicker: boolean; \n}\n\nclass Canvas extends Component<Props, State> {\n  canvasRef: RefObject<HTMLCanvasElement>;\n\n  constructor(props) {\n    super(props);\n    this.canvasRef = createRef();\n    this.state = {showColorPicker: false}\n    this.onCancel = this.onCancel.bind(this); \n    this.onComplete = this.onComplete.bind(this); \n  }\n\n  componentDidMount() {\n    this.canvasRef.current!.width = 1000;\n    this.canvasRef.current!.height = 1000;\n\n    const context = this.canvasRef.current!.getContext('2d');\n\n    // const image = new Image();\n\n    // image.onload = function() {\n    //   if (context) {\n    //     context.drawImage(image, 0, 0);\n    //   }\n    // };\n    // image.src = this.props.initialImage;\n\n\n    if (context) {\n      this.props.registerContext(context);\n    }\n\n    context!.imageSmoothingEnabled = false;\n\n    // TODO: remove this code\n    context!.fillStyle ='#000000';\n    context!.fillRect(0, 0, 1000, 500);\n    context!.fillStyle = '#ff0000';\n    context!.fillRect(0, 500, 1000, 500);\n\n    this.canvasRef.current!.addEventListener('mousemove', (ev) => {\n      if (this.state.showColorPicker) return;\n      const { x, y } = this.getMousePos(this.canvasRef.current, ev); \n      this.props.updatePosition(x, y);\n    })\n\n    this.canvasRef.current!.addEventListener('mouseout', () => {\n      if (this.state.showColorPicker) return;\n      this.props.onMouseOut();\n    })\n\n    this.canvasRef.current!.addEventListener('click', (ev) => {\n      const { x, y } = this.getMousePos(this.canvasRef.current, ev);\n      this.props.updatePosition(x, y);\n      this.showColorPicker(); \n    }, false);\n  }\n\n  getMousePos(canvas, evt) {\n    var rect = canvas.getBoundingClientRect();\n    return {\n      x: evt.clientX - rect.left,\n      y: evt.clientY - rect.top\n    };\n  }\n\n  onCancel() {\n    this.hideColorPicker(); \n  }\n\n  onComplete(c: RGBColor) {\n    this.hideColorPicker(); \n\n    const context = this.canvasRef.current!.getContext('2d');\n\n    const x = this.props.position.x; \n    const y = this.props.position.y;\n\n    context!.fillStyle = 'rgb(' + c.r + ',' + c.g + ',' + c.b + ')'\n    context!.fillRect(x, y, 1, 1);\n\n    this.props.onUpdatePixel({ r: c.r, g: c.g, b: c.b}, x, y);\n  }\n\n  showColorPicker() {\n    this.setState({\n      showColorPicker: true\n    });\n  }\n\n  hideColorPicker() {\n    this.setState({\n      showColorPicker: false\n    })\n  }\n\n  render() {\n    const { receivedError, zoomFactor, setZoomFactor } = this.props;\n    return (\n      // receivedError ? <Redirect to='/error'/> :\n      <div className='canvas-container'>\n        {this.state.showColorPicker && (<div className='color-picker'>\n          <ColorPicker\n            onCancel={this.onCancel}\n            onComplete={(c) => this.onComplete(c)}\n          />\n        </div>)}\n        <div className='zoom-canvas' style={{ transform: `scale(${zoomFactor}, ${zoomFactor})` }}>\n          <canvas ref={this.canvasRef} />\n        </div>\n        <div className='zoom-controls'>\n          <Icon\n            type='plus-circle'\n            onClick={() => setZoomFactor(zoomFactor + ZOOM_CHANGE_FACTOR)}\n            className='zoom-icon'\n          />\n          <Icon\n            type='minus-circle'\n            onClick={() => setZoomFactor(zoomFactor - ZOOM_CHANGE_FACTOR)}\n            className='zoom-icon'\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Canvas;\n","export const FETCH_IMAGE_ENDPOINT = '';\nexport const CANVAS_WIDTH = 1000;\nexport const CANVAS_HEIGHT = 1000;\nexport const DEFAULT_ZOOM = 41.0;\nexport const ZOOM_CHANGE_FACTOR = 10;\n","import { State } from '../types';\n\nexport const getCanvasContext = (state: State): CanvasRenderingContext2D | undefined => \n  state.canvas.canvasContext || undefined;\n\nexport const getCurrentPosition = (state: State): {x: number, y: number} | undefined => \n  state.canvas.curPosition || undefined;\n\nexport const getZoomFactor = (state: State): number => \n  state.canvas.zoomFactor;\n","import { connect } from 'react-redux';\nimport Canvas from '../components/Canvas';\nimport { receivedError } from '../../websocket/selectors';\nimport { registerCanvasContext, updateCursorPosition, clearCursorPosition, setZoomFactor, updatePixel } from '../actions';\nimport { getZoomFactor, getCurrentPosition } from '../selectors';\nimport { Color } from '../types';\n\ninterface DispatchProps {\n  registerContext: (context: CanvasRenderingContext2D) => void;\n  updatePosition: (x: number, y: number) => void;\n  onMouseOut: () => void;\n  setZoomFactor: (newZoom: number) => void;\n  onUpdatePixel: (newColor: Color, x: number, y: number) => void;\n}\n\ninterface StateProps {\n  receivedError: boolean;\n  zoomFactor: number;\n  position: {x: number, y: number} | undefined; \n}\n\nconst mapDispatchToProps: DispatchProps = {\n  registerContext: registerCanvasContext,\n  updatePosition: updateCursorPosition,\n  onMouseOut: clearCursorPosition,\n  setZoomFactor: setZoomFactor,\n  onUpdatePixel: updatePixel,\n};\n\nconst mapStateToProps  = (state): StateProps => ({\n  receivedError: receivedError(state),\n  zoomFactor: getZoomFactor(state),\n  position: getCurrentPosition(state), \n});\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Canvas);\n","// import { FETCH_IMAGE_ENDPOINT } from './constants';\n// import { HOSTNAME } from '../constants';\nimport { Color } from './types';\nimport * as ActionTypes from './actionTypes';\nimport { getZoomFactor, getCanvasContext } from './selectors'; \n\nconst fetchImageDataStart = () => ({\n  type: ActionTypes.FetchImageStart\n});\n\nexport type FetchImageDataStart = ReturnType<typeof fetchImageDataStart>;\n\nexport const fetchImageData = () => (dispatch) => {\n  dispatch(fetchImageDataStart());\n  \n}\n\nconst registerContext = (ctx: CanvasRenderingContext2D) => ({\n  type: ActionTypes.RegisterContext,\n  payload: {\n    context: ctx\n  }\n});\nexport type RegisterContext = ReturnType<typeof registerContext>;\n\nexport const registerCanvasContext = (ctx: CanvasRenderingContext2D) => dispatch => {\n  dispatch(registerContext(ctx));\n}\n\nconst updatePosition = (x: number, y: number) => ({\n  type: ActionTypes.UpdatePosition,\n  payload: {\n    x,\n    y\n  }\n})\nexport type UpdatePosition = ReturnType<typeof updatePosition>;\n\nexport const updateCursorPosition = (x: number, y: number) => (dispatch, getState) => {\n  const state = getState();\n  const zoom = getZoomFactor(state);\n  dispatch(updatePosition(Math.ceil(x / zoom), Math.ceil(y / zoom)));\n}\n\nconst clearPosition = () => ({\n  type: ActionTypes.ClearPosition\n})\nexport type ClearPosition = ReturnType<typeof clearPosition>;\n\nexport const clearCursorPosition = () => dispatch => {\n  dispatch(clearPosition());\n}\n\nconst setZoom = (f: number) => ({\n  type: ActionTypes.SetZoom,\n  payload: {\n    zoom: f\n  }\n});\nexport type SetZoom = ReturnType<typeof setZoom>;\n\nexport const setZoomFactor = (newFactor: number) => (dispatch, getState) => {\n  if (newFactor < 0) {\n    return;\n  }\n\n  const state = getState();\n  const ctx = getCanvasContext(state);\n  if (ctx) {\n    ctx.scale(newFactor, newFactor);\n  }\n  \n  dispatch(setZoom(newFactor));\n}\n\n\nexport const updatePixel = (newColor: Color, x: number, y: number) => (dispatch) => {\n\n}\n","export const FetchImageStart = 'canvas/FETCH_IMAGE_START';\nexport const FetchImageSuccess = 'canvas/FETCH_IMAGE_SUCCESS';\nexport const FetchImageError = 'canvas/FETCH_IMAGE_ERROR';\nexport const UpdatePixelStart = 'canvas/UPDATE_PIXEL_START';\nexport const UpdatePixelSuccess = 'canvas/UPDATE_PIXEL_SUCCESS';\nexport const UpdatePixelError = 'canvas/UPDATE_PIXEL_ERROR';\nexport const RegisterContext = 'canvas/REGISTER_CONTEXT';\nexport const UpdatePosition = 'canvas/UPDATE_POSITION';\nexport const ClearPosition = 'canvas/CLEAR_POSITION';\nexport const SetZoom = 'canvas/SET_ZOOM';\n","import React, { FC } from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport ScrollToTop from './components/ScrollToTop';\nimport CanvasPageContainer from './canvas/containers/CanvasPageContainer';\nimport AboutPage from './about/containers/AboutContainer';\nimport Header from './header/containers/HeaderContainer';\nimport Footer from './footer/components/Footer';\nimport ErrorPage from './error/components/Error';\nimport CanvasContainer from './canvas/containers/CanvasContainer';\n\nconst RoutingContainer: FC = () => (\n  <Router basename='/OwlPlace'>\n    <ScrollToTop>\n      <Header />\n      <Route exact path='/' component={CanvasPageContainer} />\n      <Route path='/about' component={AboutPage} />\n      <Route path='/error' component={ErrorPage} />\n      <Route path='/canvas' component={CanvasContainer} />\n      <Footer />\n    </ScrollToTop>\n  </Router>\n);\n\nexport default RoutingContainer;\n","import React from \"react\";\nimport \"./App.scss\";\nimport RoutingContainer from './RoutingContainer';\nimport { connect } from 'react-redux';\nimport { checkLogin } from './login/actions';\nimport { openWebSocket } from './websocket/actions';\n\n// // updateMessage is type 1\n// const updateMessage = (\n//   id: string,\n//   x: number,\n//   y: number,\n//   r: number,\n//   g: number,\n//   b: number\n// ) => {\n//   return JSON.stringify({\n//     type: 1,\n//     userId: id,\n//     x: x,\n//     y: y,\n//     r: r,\n//     g: g,\n//     b: b\n//   });\n// };\n// const onClickP1 = (\n//   id: string,\n//   x: number,\n//   y: number,\n//   r: number,\n//   g: number,\n//   b: number\n// ) => {\n//   console.log(\"Sending update of Pixel 1\");\n//   socket.send(updateMessage(id, x, y, r, g, b));\n\n//   return true;\n// }\n\ninterface Props {\n  checkLogin: () => void;\n  openConnection: () => void;\n}\n\nclass App extends React.Component<Props> {\n\n  componentDidMount() {\n    this.props.checkLogin();\n    this.props.openConnection();\n  }\n  \n  render() {\n    return (\n      // <div>\n      //   <div className=\"top-nav-bar\">\n      //     <button className=\"login-btn\" onClick={onSignIn}>\n      //       <p className=\"login-text\">login</p>\n      //     </button>\n      //   </div>\n      //   <div className=\"main-wrapper\">\n      //     <h1>owlplaces</h1>\n      //     <h2>change the canvas one pixel at a time</h2>\n      //     <p>Click \"Pixel 1\" to send an update message to the server!\n      //       </p>\n      //       <button onClick = {() => onClickP1(\"user1\", 10, 400, 255, 255, 255)} id=\"p1\"> Pixel 1 </button>\n      //       {/* <button onClick= {onClickClose} id=\"close\">Close</button> */}\n      //   </div>\n      // </div>\n      <RoutingContainer />\n    );\n  }\n};\n\nconst mapDispatchToProps: Props = {\n  checkLogin: checkLogin,\n  openConnection: openWebSocket\n}\n\nexport default connect(\n  null,\n  mapDispatchToProps,\n)(App);\n","export const HOSTNAME = '127.0.0.1:3001';\n","// TODO (ryan): add stricter typing to handlers\nexport function createReducer<T>(\n  initialState: T,\n  handlers\n) {\n  return function(state: T = initialState, action): T {\n    const handler = handlers[action && action.type];\n    if (!handler) {\n      return state;\n    }\n    return handler(state, action);\n  };\n}\n","import { Color } from './types';\nimport * as ActionTypes from './actionTypes';\nimport { combineReducers,  } from 'redux';\nimport { createReducer } from '../createReducer';\nimport { RegisterContext, UpdatePosition, SetZoom } from './actions';\nimport * as WebSocketActionTypes from '../websocket/actionTypes';\nimport { DEFAULT_ZOOM } from './constants'\n\nexport interface State {\n  canvasContext: CanvasRenderingContext2D | null;\n  initialImage: string | null;\n  curPosition: { x: number, y: number} | null;\n  zoomFactor: number;\n}\n\nconst canvasContext = createReducer<State['canvasContext']>(null, {\n  [WebSocketActionTypes.ConnectError]: () => null,\n  [ActionTypes.RegisterContext]: (state, action: RegisterContext) => action.payload.context\n});\n\nconst curPosition = createReducer<State['curPosition']>(null, {\n  [ActionTypes.ClearPosition]: () => null,\n  [ActionTypes.UpdatePosition]: (state, action: UpdatePosition) => action.payload\n});\n\nconst zoomFactor = createReducer<State['zoomFactor']>(DEFAULT_ZOOM, {\n  [ActionTypes.SetZoom]: (state, action: SetZoom) => action.payload.zoom\n})\n\nexport default combineReducers({\n  canvasContext,\n  curPosition,\n  zoomFactor,\n});\n","import { createReducer } from '../createReducer';\nimport * as ActionTypes from './actionTypes';\nimport { combineReducers } from 'redux';\nimport { LoginSuccess } from './actions';\n\n\nexport interface State {\n  isLoggedIn: boolean;\n  name: string | null;\n  email: string | null;\n  userId: string | null;\n}\n\nconst isLoggedIn = createReducer<State['isLoggedIn']>(false, {\n  [ActionTypes.LoginStart]: () =>  false,\n  [ActionTypes.LoginError]: () =>  false,\n  [ActionTypes.SignOut]: () => false,\n  [ActionTypes.LoginSuccess]: () => true,\n});\n\nconst name = createReducer<State['name']>(null, {\n  [ActionTypes.LoginStart]: () =>  null,\n  [ActionTypes.LoginError]: () =>  null,\n  [ActionTypes.SignOut]: () => null,\n  [ActionTypes.LoginSuccess]: (state, action: LoginSuccess) => action.payload.name,\n});\n\nconst email = createReducer<State['name']>(null, {\n  [ActionTypes.LoginStart]: () =>  null,\n  [ActionTypes.LoginError]: () =>  null,\n  [ActionTypes.SignOut]: () => null,\n  [ActionTypes.LoginSuccess]: (state, action: LoginSuccess) => action.payload.email,\n});\n\nconst id = createReducer<State['userId']>(null, {\n  [ActionTypes.LoginStart]: () =>  null,\n  [ActionTypes.LoginError]: () =>  null,\n  [ActionTypes.SignOut]: () => null,\n  [ActionTypes.LoginSuccess]: (state, action: LoginSuccess) => action.payload.id,\n});\n\n\n\nexport default combineReducers({\n  isLoggedIn,\n  name,\n  email,\n  id,\n});\n","import { createReducer } from '../createReducer';\nimport * as ActionTypes from './actionTypes';\nimport { ConnectSuccess } from './actions';\nimport { combineReducers } from 'redux';\n \nexport interface State {\n  socket: WebSocket | null;\n  isConnected: boolean;\n  receivedError: boolean; \n}\n\nconst socket = createReducer<State['socket']>(null, {\n  [ActionTypes.StartConnect]: () => null,\n  [ActionTypes.ConnectError]: () => null,\n  [ActionTypes.CloseConnection]: () => null,\n  [ActionTypes.ConnectSuccess]: (state, action: ConnectSuccess) => action.payload.socket,\n});\n\nconst isConnected = createReducer<State['isConnected']>(false, {\n  [ActionTypes.StartConnect]: () => false,\n  [ActionTypes.ConnectError]: () => false,\n  [ActionTypes.CloseConnection]: () => false,\n  [ActionTypes.ConnectSuccess]: () => true,\n});\n\nconst receivedError = createReducer<State['receivedError']>(false, {\n  [ActionTypes.StartConnect]: () => false,\n  [ActionTypes.ConnectError]: () => true,\n  [ActionTypes.CloseConnection]: () => false,\n  [ActionTypes.ConnectSuccess]: () => false,\n}); \n\nexport default combineReducers({\n  socket,\n  isConnected,\n  receivedError\n})\n","import React from 'react';\nimport { render } from 'react-dom'\nimport './index.scss';\nimport App from './App';\nimport { combineReducers, createStore, applyMiddleware, compose } from 'redux';\nimport canvasReducers from './canvas/reducers';\nimport loginReducers from './login/reducers';\nimport webSocketReducers from './websocket/reducers';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\n\nconst rootReducer = combineReducers({\n  canvas: canvasReducers,\n  login: loginReducers,\n  websocket: webSocketReducers,\n});\n\n// @ts-ignore - redux devtools doesn't have type definitions\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}