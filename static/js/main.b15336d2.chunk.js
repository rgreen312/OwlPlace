(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{121:function(e,n,t){e.exports=t(194)},126:function(e,n,t){},127:function(e,n,t){},135:function(e,n,t){},193:function(e,n,t){},194:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(5),o=(t(126),t(103)),u=t(104),i=t(118),l=t(105),s=t(119),f=(t(127),t(50)),p=t(32),g=Object(p.e)(function(e){var n=e.children,t=e.location.pathname;return Object(a.useEffect)(function(){window.scrollTo(0,0)},[t]),n||null}),O=function(){return r.a.createElement("div",null,"This is the canvas page")},b=t(29),m="websocket/START_CONNECT",d="websocket/CONNECT_SUCCESS",h="websocket/CONNECT_ERROR",j="websocket/CLOSE_CONNNECTION",E=function(e){return e.websocket.socket||void 0},v=function(){return{type:j}},y=function(e){var n=e.sendUpdateMessage;return r.a.createElement("div",{className:"about-page"},"Update the canvas one pixel at a time...",r.a.createElement("h2",null,"change the canvas one pixel at a time"),r.a.createElement("p",null,'Click "Pixel 1" to send an update message to the server!'),r.a.createElement("button",{onClick:function(){return n("user1",10,400,255,255,255)},id:"p1"}," Pixel 1 "))},w={sendUpdateMessage:function(e,n,t,a,r,c){return function(o,u){var i=E(u());i&&i.send(function(e,n,t,a,r,c){return JSON.stringify({type:1,userId:e,x:n,y:t,r:a,g:r,b:c})}(e,n,t,a,r,c))}}},k=Object(b.b)(null,w)(y),C=t(64),I=t(87),N=t(198),S=t(11),T=t(196),_=t(197),x=(t(135),function(e){var n=e.onLogin,t=e.isLoggedIn,a=e.name,c=e.onLogout;window.onGoogleScriptLoad=function(){console.log("The google script has really loaded, cool!")};var o=t?r.a.createElement(r.a.Fragment,null,"Hi, ",a):r.a.createElement(C.a,{className:"login-button",onClick:n},"Login"),u=r.a.createElement(I.a,null,r.a.createElement(I.a.Item,null,r.a.createElement(f.b,{to:"/about"},"About")),t&&r.a.createElement(I.a.Item,{onClick:c},"Sign Out")),i=r.a.createElement(N.a,{key:"more",overlay:u},r.a.createElement(C.a,{style:{border:"none",padding:0}},r.a.createElement(S.a,{type:"ellipsis",style:{fontSize:20,verticalAlign:"top"}})));return r.a.createElement(T.a,{title:"OwlPlace",subTitle:"change the canvas one pixel at a time",tags:r.a.createElement(_.a,{color:"green"},"COMP 413"),extra:[o,i]})}),L=t(39),A=t.n(L),P=t(63),R="login/LOGIN_START",U="login/LOGIN_SUCCESS",M="login/LOGIN_ERROR",G="login/SIGN_OUT",J=function(){return{type:R}},D=function(e,n,t){return{type:U,payload:{name:e,id:n,email:t}}},z=function(e){return e.login.isLoggedIn},B=function(e){return e.login.name||void 0},F={onLogin:function(){return function(){var e=Object(P.a)(A.a.mark(function e(n){var t,a,r;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(J()),t=new Promise(function(e){gapi.load("auth2",function(){gapi.auth2.init({client_id:"634069824484-ch6gklc2fevg9852aohe6sv2ctq7icbk.apps.googleusercontent.com"}),e()})}),e.next=4,t;case 4:return e.next=6,gapi.auth2.getAuthInstance().signIn();case 6:a=gapi.auth2.getAuthInstance().currentUser.get(),r=a.getBasicProfile(),n(D(r.getName(),r.getId(),r.getEmail()));case 9:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()},onLogout:function(){return function(){var e=Object(P.a)(A.a.mark(function e(n){var t;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=gapi.auth2.getAuthInstance(),e.next=3,t.signOut();case 3:n({type:G});case 4:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()}},X=Object(b.b)(function(e){return{isLoggedIn:z(e),name:B(e)}},F)(x),q=(t(193),function(){return r.a.createElement("div",null,r.a.createElement("footer",null,"Made with \u2665 by COMP 413 @ Rice"))}),H=function(){return r.a.createElement("div",{className:"error-page"},"There was an error.")},V=function(){return r.a.createElement(f.a,null,r.a.createElement(g,null,r.a.createElement(X,null),r.a.createElement(p.a,{exact:!0,path:"/",component:O}),r.a.createElement(p.a,{path:"/about",component:k}),r.a.createElement(p.a,{path:"/error",component:H}),r.a.createElement(q,null)))},W=function(e){function n(){return Object(o.a)(this,n),Object(i.a)(this,Object(l.a)(n).apply(this,arguments))}return Object(s.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.checkLogin(),this.props.openConnection()}},{key:"render",value:function(){return r.a.createElement(V,null)}}]),n}(r.a.Component),Z={checkLogin:function(){return function(){var e=Object(P.a)(A.a.mark(function e(n){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(J()),e.abrupt("return",new Promise(function(e){var t=setTimeout(function(){return Promise.resolve()},3e3);Promise.race([t,function(){return new Promise(function(e){for(;!window.gapi;);e()})}]),window.gapi&&gapi.load("auth2",function(){gapi.auth2.init({client_id:"634069824484-ch6gklc2fevg9852aohe6sv2ctq7icbk.apps.googleusercontent.com"}).then(function(){if(gapi.auth2.getAuthInstance().isSignedIn.get()){var e=gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();n(D(e.getName(),e.getName(),e.getEmail()))}}),e()})}));case 2:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()},openConnection:function(){return function(e){e({type:m});var n=new WebSocket("ws://".concat("127.0.0.1:3001","/ws"));n.onopen=function(){n.send(JSON.stringify({type:0,message:"Hi From the Client! The websocket just opened"})),n.send(JSON.stringify({type:1,userId:"AAAAAA",x:6,y:9,r:4,g:2,b:0})),e(function(e){return{type:d,payload:{socket:e}}}(n))},n.onclose=function(n){e(v())},n.onerror=function(n){e(function(e){return{type:h,payload:{error:e}}}(n.type))},n.onmessage=function(e){var n=e.data;console.log("Recieved a message from the server, message: "+n)}}}},K=Object(b.b)(null,Z)(W),Q=t(16),Y=t(7);function $(e,n){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,a=arguments.length>1?arguments[1]:void 0,r=n[a&&a.type];return r?r(t,a):t}}var ee,ne,te,ae,re,ce,oe,ue,ie,le=$(null,(ee={},Object(Y.a)(ee,h,function(){return null}),Object(Y.a)(ee,"canvas/REGISTER_CONTEXT",function(e,n){return n.payload.context}),ee)),se=$(null,(ne={},Object(Y.a)(ne,"canvas/CLEAR_POSITION",function(){return null}),Object(Y.a)(ne,"canvas/UPDATE_POSITION",function(e,n){return n.payload}),ne)),fe=$(41,Object(Y.a)({},"canvas/SET_ZOOM",function(e,n){return n.payload.zoom})),pe=Object(Q.c)({canvasContext:le,curPosition:se,zoomFactor:fe}),ge=$(!1,(te={},Object(Y.a)(te,R,function(){return!1}),Object(Y.a)(te,M,function(){return!1}),Object(Y.a)(te,G,function(){return!1}),Object(Y.a)(te,U,function(){return!0}),te)),Oe=$(null,(ae={},Object(Y.a)(ae,R,function(){return null}),Object(Y.a)(ae,M,function(){return null}),Object(Y.a)(ae,G,function(){return null}),Object(Y.a)(ae,U,function(e,n){return n.payload.name}),ae)),be=$(null,(re={},Object(Y.a)(re,R,function(){return null}),Object(Y.a)(re,M,function(){return null}),Object(Y.a)(re,G,function(){return null}),Object(Y.a)(re,U,function(e,n){return n.payload.email}),re)),me=$(null,(ce={},Object(Y.a)(ce,R,function(){return null}),Object(Y.a)(ce,M,function(){return null}),Object(Y.a)(ce,G,function(){return null}),Object(Y.a)(ce,U,function(e,n){return n.payload.id}),ce)),de=Object(Q.c)({isLoggedIn:ge,name:Oe,email:be,id:me}),he=$(null,(oe={},Object(Y.a)(oe,m,function(){return null}),Object(Y.a)(oe,h,function(){return null}),Object(Y.a)(oe,j,function(){return null}),Object(Y.a)(oe,d,function(e,n){return n.payload.socket}),oe)),je=$(!1,(ue={},Object(Y.a)(ue,m,function(){return!1}),Object(Y.a)(ue,h,function(){return!1}),Object(Y.a)(ue,j,function(){return!1}),Object(Y.a)(ue,d,function(){return!0}),ue)),Ee=$(!1,(ie={},Object(Y.a)(ie,m,function(){return!1}),Object(Y.a)(ie,h,function(){return!0}),Object(Y.a)(ie,j,function(){return!1}),Object(Y.a)(ie,d,function(){return!1}),ie)),ve=Object(Q.c)({socket:he,isConnected:je,receivedError:Ee}),ye=t(117);t.d(n,"store",function(){return Ce});var we=Object(Q.c)({canvas:pe,login:de,websocket:ve}),ke=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Q.d,Ce=Object(Q.e)(we,ke(Object(Q.a)(ye.a)));Object(c.render)(r.a.createElement(b.a,{store:Ce},r.a.createElement(K,null)),document.getElementById("root"))}},[[121,1,2]]]);
//# sourceMappingURL=main.b15336d2.chunk.js.map