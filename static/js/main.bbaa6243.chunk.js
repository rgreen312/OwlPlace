(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{205:function(e,n,t){e.exports=t(439)},210:function(e,n,t){},211:function(e,n,t){},380:function(e,n,t){},424:function(e,n,t){},425:function(e,n,t){},438:function(e,n,t){},439:function(e,n,t){"use strict";t.r(n);var a,o,r=t(0),c=t.n(r),i=t(6),u=(t(210),t(91)),l=t(92),s=t(96),f=t(93),p=t(95),m=(t(211),t(67)),g=t(41),b=Object(g.e)(function(e){var n=e.children,t=e.location.pathname;return Object(r.useEffect)(function(){window.scrollTo(0,0)},[t]),n||null}),d=t(29),v=t(68),O=t(203),h=t(191),E=t(98),y=(t(380),function(e){var n=e.onComplete,t=e.onCancel,a=Object(r.useState)({r:0,g:0,b:0}),o=Object(O.a)(a,2),i=o[0],u=o[1];return c.a.createElement("div",null,c.a.createElement(h.SketchPicker,{color:i,onChange:function(e){return u({r:e.rgb.r,b:e.rgb.b,g:e.rgb.g})}}),c.a.createElement("div",{className:"button-bar"},c.a.createElement(E.a,{onClick:function(){return n(i)},className:"okay-button"},"Okay"),c.a.createElement(E.a,{onClick:t,className:"cancel-button"},"Cancel")))}),C=(t(424),t(13)),j=function(e){function n(e){var t;return Object(u.a)(this,n),(t=Object(s.a)(this,Object(f.a)(n).call(this,e))).canvasRef=void 0,t.canvasRef=Object(r.createRef)(),t.state={showColorPicker:!1},t.onCancel=t.onCancel.bind(Object(v.a)(t)),t.onComplete=t.onComplete.bind(Object(v.a)(t)),t}return Object(p.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.canvasRef.current.width=1e3,this.canvasRef.current.height=1e3;var n=this.canvasRef.current.getContext("2d");n&&this.props.registerContext(n),n.imageSmoothingEnabled=!1,n.fillStyle="#000000",n.fillRect(0,0,1e3,500),n.fillStyle="#ff0000",n.fillRect(0,500,1e3,500),this.canvasRef.current.addEventListener("mousemove",function(n){if(!e.state.showColorPicker){var t=e.getMousePos(e.canvasRef.current,n),a=t.x,o=t.y;e.props.updatePosition(a,o)}}),this.canvasRef.current.addEventListener("mouseout",function(){e.state.showColorPicker||e.props.onMouseOut()}),this.canvasRef.current.addEventListener("click",function(n){var t=e.getMousePos(e.canvasRef.current,n),a=t.x,o=t.y;e.props.updatePosition(a,o),e.showColorPicker()},!1)}},{key:"getMousePos",value:function(e,n){var t=e.getBoundingClientRect();return{x:n.clientX-t.left,y:n.clientY-t.top}}},{key:"onCancel",value:function(){this.hideColorPicker()}},{key:"onComplete",value:function(e){this.hideColorPicker();var n=this.canvasRef.current.getContext("2d"),t=this.props.position.x,a=this.props.position.y;n.fillStyle="rgb("+e.r+","+e.g+","+e.b+")",n.fillRect(t,a,1,1),this.props.onUpdatePixel({r:e.r,g:e.g,b:e.b},t,a)}},{key:"showColorPicker",value:function(){this.setState({showColorPicker:!0})}},{key:"hideColorPicker",value:function(){this.setState({showColorPicker:!1})}},{key:"render",value:function(){var e=this,n=this.props,t=(n.receivedError,n.zoomFactor),a=n.setZoomFactor;return c.a.createElement("div",{className:"canvas-container"},this.state.showColorPicker&&c.a.createElement("div",{className:"color-picker"},c.a.createElement(y,{onCancel:this.onCancel,onComplete:function(n){return e.onComplete(n)}})),c.a.createElement("div",{className:"zoom-canvas",style:{transform:"scale(".concat(t,", ").concat(t,")")}},c.a.createElement("canvas",{ref:this.canvasRef})),c.a.createElement("div",{className:"zoom-controls"},c.a.createElement(C.a,{type:"plus-circle",onClick:function(){return a(t+10)},className:"zoom-icon"}),c.a.createElement(C.a,{type:"minus-circle",onClick:function(){return a(t-10)},className:"zoom-icon"})))}}]),n}(r.Component),k=function(e){return e.websocket.socket||void 0},w=function(e){return e.websocket.receivedError},P=function(e){return e.canvas.curPosition||void 0},N=function(e){return e.canvas.zoomFactor},S={registerContext:function(e){return function(n){n(function(e){return{type:"canvas/REGISTER_CONTEXT",payload:{context:e}}}(e))}},updatePosition:function(e,n){return function(t,a){var o=a(),r=N(o);t(function(e,n){return{type:"canvas/UPDATE_POSITION",payload:{x:e,y:n}}}(Math.ceil(e/r),Math.ceil(n/r)))}},onMouseOut:function(){return function(e){e({type:"canvas/CLEAR_POSITION"})}},setZoomFactor:function(e){return function(n,t){if(!(e<0)){var a=function(e){return e.canvas.canvasContext||void 0}(t());a&&a.scale(e,e),n({type:"canvas/SET_ZOOM",payload:{zoom:e}})}}},onUpdatePixel:function(e,n,t){return function(e){}}},R=Object(d.b)(function(e){return{receivedError:w(e),zoomFactor:N(e),position:P(e)}},S)(j),I=function(){return c.a.createElement(R,null)},x="websocket/START_CONNECT",T="websocket/CONNECT_SUCCESS",_="websocket/CONNECT_ERROR",L="websocket/CLOSE_CONNNECTION",A=function(){return{type:L}},M=function(e){var n=e.sendUpdateMessage;return c.a.createElement("div",{className:"about-page"},"Update the canvas one pixel at a time...",c.a.createElement("h2",null,"change the canvas one pixel at a time"),c.a.createElement("p",null,'Click "Pixel 1" to send an update message to the server!'),c.a.createElement("button",{onClick:function(){return n("user1",10,400,255,255,255)},id:"p1"}," Pixel 1 "))},U={sendUpdateMessage:function(e,n,t,a,o,r){return function(c,i){var u=k(i());u&&u.send(function(e,n,t,a,o,r){return JSON.stringify({type:1,userId:e,x:n,y:t,r:a,g:o,b:r})}(e,n,t,a,o,r))}}},z=Object(d.b)(null,U)(M),F=t(138),G=t(442),D=t(440),J=t(441),X=(t(425),function(e){var n=e.onLogin,t=e.isLoggedIn,a=e.name,o=e.onLogout;window.onGoogleScriptLoad=function(){console.log("The google script has really loaded, cool!")};var r=t?c.a.createElement(c.a.Fragment,null,"Hi, ",a):c.a.createElement(E.a,{className:"login-button",onClick:n},"Login"),i=c.a.createElement(F.a,null,c.a.createElement(F.a.Item,null,c.a.createElement(m.b,{to:"/about"},"About")),t&&c.a.createElement(F.a.Item,{onClick:o},"Sign Out")),u=c.a.createElement(G.a,{key:"more",overlay:i},c.a.createElement(E.a,{style:{border:"none",padding:0}},c.a.createElement(C.a,{type:"ellipsis",style:{fontSize:20,verticalAlign:"top"}})));return c.a.createElement(D.a,{title:"OwlPlace",subTitle:"change the canvas one pixel at a time",tags:c.a.createElement(J.a,{color:"green"},"COMP 413"),extra:[r,u]})}),B=t(50),Z=t.n(B),q=t(97),H="login/LOGIN_START",V="login/LOGIN_SUCCESS",W="login/LOGIN_ERROR",Y="login/SIGN_OUT",K=function(){return{type:H}},Q=function(e,n,t){return{type:V,payload:{name:e,id:n,email:t}}},$=function(e){return e.login.isLoggedIn},ee=function(e){return e.login.name||void 0},ne={onLogin:function(){return function(){var e=Object(q.a)(Z.a.mark(function e(n){var t,a,o;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(K()),t=new Promise(function(e){gapi.load("auth2",function(){gapi.auth2.init({client_id:"634069824484-ch6gklc2fevg9852aohe6sv2ctq7icbk.apps.googleusercontent.com"}),e()})}),e.next=4,t;case 4:return e.next=6,gapi.auth2.getAuthInstance().signIn();case 6:a=gapi.auth2.getAuthInstance().currentUser.get(),o=a.getBasicProfile(),n(Q(o.getName(),o.getId(),o.getEmail()));case 9:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()},onLogout:function(){return function(){var e=Object(q.a)(Z.a.mark(function e(n){var t;return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=gapi.auth2.getAuthInstance(),e.next=3,t.signOut();case 3:n({type:Y});case 4:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()}},te=Object(d.b)(function(e){return{isLoggedIn:$(e),name:ee(e)}},ne)(X),ae=(t(438),function(){return c.a.createElement("div",null,c.a.createElement("footer",null,"Made with \u2665 by COMP 413 @ Rice"))}),oe=function(){return c.a.createElement("div",{className:"error-page"},"There was an error.")},re=function(){return c.a.createElement(m.a,{basename:"/OwlPlace"},c.a.createElement(b,null,c.a.createElement(te,null),c.a.createElement(g.a,{exact:!0,path:"/",component:I}),c.a.createElement(g.a,{path:"/about",component:z}),c.a.createElement(g.a,{path:"/error",component:oe}),c.a.createElement(ae,null)))},ce=function(e){function n(){return Object(u.a)(this,n),Object(s.a)(this,Object(f.a)(n).apply(this,arguments))}return Object(p.a)(n,e),Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.checkLogin(),this.props.openConnection()}},{key:"render",value:function(){return c.a.createElement(re,null)}}]),n}(c.a.Component),ie={checkLogin:function(){return function(){var e=Object(q.a)(Z.a.mark(function e(n){return Z.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(K()),e.abrupt("return",new Promise(function(e){var t=setTimeout(function(){return Promise.resolve()},3e3);Promise.race([t,function(){return new Promise(function(e){for(;!window.gapi;);e()})}]),window.gapi&&gapi.load("auth2",function(){gapi.auth2.init({client_id:"634069824484-ch6gklc2fevg9852aohe6sv2ctq7icbk.apps.googleusercontent.com"}).then(function(){if(gapi.auth2.getAuthInstance().isSignedIn.get()){var e=gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();n(Q(e.getName(),e.getName(),e.getEmail()))}}),e()})}));case 2:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}()},openConnection:function(){return function(e){e({type:x});var n=new WebSocket("ws://".concat("127.0.0.1:3001","/ws"));n.onopen=function(){n.send(JSON.stringify({type:0,message:"Hi From the Client! The websocket just opened"})),n.send(JSON.stringify({type:1,userId:"AAAAAA",x:6,y:9,r:4,g:2,b:0})),e(function(e){return{type:T,payload:{socket:e}}}(n))},n.onclose=function(n){e(A())},n.onerror=function(n){e(function(e){return{type:_,payload:{error:e}}}(n.type))},n.onmessage=function(e){var n=e.data;console.log("Recieved a message from the server, message: "+n)}}}},ue=Object(d.b)(null,ie)(ce),le=t(20),se=t(8);function fe(e,n){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,a=arguments.length>1?arguments[1]:void 0,o=n[a&&a.type];return o?o(t,a):t}}var pe,me,ge,be,de,ve,Oe,he=fe(null,(a={},Object(se.a)(a,_,function(){return null}),Object(se.a)(a,"canvas/REGISTER_CONTEXT",function(e,n){return n.payload.context}),a)),Ee=fe(null,(o={},Object(se.a)(o,"canvas/CLEAR_POSITION",function(){return null}),Object(se.a)(o,"canvas/UPDATE_POSITION",function(e,n){return n.payload}),o)),ye=fe(41,Object(se.a)({},"canvas/SET_ZOOM",function(e,n){return n.payload.zoom})),Ce=Object(le.c)({canvasContext:he,curPosition:Ee,zoomFactor:ye}),je=fe(!1,(pe={},Object(se.a)(pe,H,function(){return!1}),Object(se.a)(pe,W,function(){return!1}),Object(se.a)(pe,Y,function(){return!1}),Object(se.a)(pe,V,function(){return!0}),pe)),ke=fe(null,(me={},Object(se.a)(me,H,function(){return null}),Object(se.a)(me,W,function(){return null}),Object(se.a)(me,Y,function(){return null}),Object(se.a)(me,V,function(e,n){return n.payload.name}),me)),we=fe(null,(ge={},Object(se.a)(ge,H,function(){return null}),Object(se.a)(ge,W,function(){return null}),Object(se.a)(ge,Y,function(){return null}),Object(se.a)(ge,V,function(e,n){return n.payload.email}),ge)),Pe=fe(null,(be={},Object(se.a)(be,H,function(){return null}),Object(se.a)(be,W,function(){return null}),Object(se.a)(be,Y,function(){return null}),Object(se.a)(be,V,function(e,n){return n.payload.id}),be)),Ne=Object(le.c)({isLoggedIn:je,name:ke,email:we,id:Pe}),Se=fe(null,(de={},Object(se.a)(de,x,function(){return null}),Object(se.a)(de,_,function(){return null}),Object(se.a)(de,L,function(){return null}),Object(se.a)(de,T,function(e,n){return n.payload.socket}),de)),Re=fe(!1,(ve={},Object(se.a)(ve,x,function(){return!1}),Object(se.a)(ve,_,function(){return!1}),Object(se.a)(ve,L,function(){return!1}),Object(se.a)(ve,T,function(){return!0}),ve)),Ie=fe(!1,(Oe={},Object(se.a)(Oe,x,function(){return!1}),Object(se.a)(Oe,_,function(){return!0}),Object(se.a)(Oe,L,function(){return!1}),Object(se.a)(Oe,T,function(){return!1}),Oe)),xe=Object(le.c)({socket:Se,isConnected:Re,receivedError:Ie}),Te=t(202);t.d(n,"store",function(){return Ae});var _e=Object(le.c)({canvas:Ce,login:Ne,websocket:xe}),Le=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||le.d,Ae=Object(le.e)(_e,Le(Object(le.a)(Te.a)));Object(i.render)(c.a.createElement(d.a,{store:Ae},c.a.createElement(ue,null)),document.getElementById("root"))}},[[205,1,2]]]);
//# sourceMappingURL=main.bbaa6243.chunk.js.map